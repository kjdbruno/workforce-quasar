import{af as ze,a as B,r as p,O as Ae,V as E,W as c,X as s,Z as e,a4 as h,a6 as g,$ as a,a2 as f,_ as X,a7 as ge,ak as ye,a5 as y,Y as b,aa as R,a8 as J,a9 as K,am as _e,ar as Oe,br as Le,ag as G,d as le,a0 as $,ai as se,a3 as he,a1 as Te,ac as we,aq as F,S as be,T as Ue,k as Pe,aj as Qe,ab as je}from"./index-DwkUvebD.js";import{a as Fe,Q as $e,b as oe}from"./QSpinnerIos-D0LspzUJ.js";import{T as P}from"./sweetalert-CAHudMyk.js";import{_ as ke,Q as pe,h as Ne}from"./_plugin-vue_export-helper-n2pIy_th.js";import{Q as re,C as ve}from"./ClosePopup-DSk8RB6H.js";import{Q as fe}from"./QTime-Bq6LBjUo.js";import"./format-CoaQEihs.js";import"./TouchPan-DPfOdPTY.js";const ne=ze("overtimeStore",{state:()=>({component:null,data:null,isEdit:!1}),getters:{},actions:{},persist:!0}),Ie={class:"text-h6 text-uppercase"},Re={key:0},Be={class:"q-mb-md"},He={class:"card-grid"},Me={class:"inner-card-anim-wrapper",style:{animationDelay:"100ms"}},Ye={class:"text-caption text-dark text-uppercase"},We={class:"absolute-left"},Ge={key:1},Xe={class:"row q-col-gutter-xs q-mb-md"},Ze={class:"col-2"},Je={class:"row q-col-gutter-xs q-mb-md"},Ke={class:"col-2"},et={class:"row items-center justify-end"},tt={class:"col-2"},at={class:"row items-center justify-end"},st={class:"row q-col-gutter-xs q-mb-xl"},lt={class:"col-4"},ot={class:"row q-gutter-sm"},it={class:"text-caption text-uppercase text-grey"},xe=2,rt={__name:"OvertimeDialog",props:{modelValue:String,dialogName:String},emits:["update:modelValue","saved"],setup(ee,{emit:H}){const N=ne(),Q=ee,D=H,C=B({get:()=>Q.modelValue===Q.dialogName,set:t=>{t||D("update:modelValue",null)}}),I=p(!1),k=()=>{n(),V(),q.value=0},T=p(""),w=p(""),m=p(""),S=p(""),O=p(""),_=p([]),d=Ae({date:{type:null,message:""},timeStart:{type:null,message:""},timeEnd:{type:null,message:""},description:{type:null,message:""},personnels:{type:null,message:""}}),M=()=>P.fire({icon:"error",html:`
        <div class="text-h6 text-bold text-uppercase">Request Failed</div>
        <div class="text-caption">Something went wrong.</div>
        `}),U=(t,l="required")=>(d[t].type=!0,d[t].msg=l,!0),Y=t=>(d[t].type=null,d[t].msg="",!1),L=(t,l)=>l?Y(t):U(t,"required"),x=()=>{let t=!1;return(!Array.isArray(_.value)||_.value.length===0)&&(L("personnels",null),t=!0),t&&M(),!t},u=()=>{let t=!1;return t||=L("date",w.value),t||=L("timeStart",m.value),t||=L("timeEnd",S.value),t||=L("description",O.value),t&&M(),!t},v=async()=>{if(!(u&&!u())){I.value=!0;try{const t=T.value&&N.isEdit?await F.post(`/overtime/${T.value}/update`,{date:w.value,timeStart:m.value,timeEnd:S.value,description:O.value,employees:_.value}):await F.post("/overtime",{date:w.value,timeStart:m.value,timeEnd:S.value,description:O.value,employees:_.value});D("saved"),D("update:modelValue",null),P.fire({icon:"success",html:`
                <div class="text-h6 text-bold text-uppercase">granted!</div>
                <div class="text-caption text-capitalize;">${t.data.message}<div>
            `})}catch(t){t.response&&t.response.data&&(z(t.response.data),P.fire({icon:"error",html:`
                    <div class="text-h6 text-bold text-uppercase">Request Failed</div>
                    <div class="text-caption">Something went wrong.</div>
                `}))}finally{I.value=!1}}},z=t=>{const l=Array.isArray(t)?t:t?.errors||[];Object.keys(d).forEach(r=>{d[r].type=null,d[r].messages=[]}),l.forEach(r=>{d[r.path]!==void 0&&(d[r.path].type=!0,d[r.path].messages.push(r.msg))})},i=t=>{if(!t)return"";const l=t.first_name||"",r=t.middle_name?t.middle_name.charAt(0).toUpperCase()+".":"",W=t.last_name||"",j=t.suffix?` ${t.suffix}`:"";return`${l} ${r} ${W}${j}`.trim()},o=p([]),n=async()=>{try{const{data:t}=await F.get("/leave/option/employee");o.value=t}catch(t){console.error("Error fetching options:",t)}},V=()=>{T.value="",w.value=new Date().toISOString().split("T")[0],m.value="",S.value="",O.value="",_.value=[],Z()},Z=()=>{Object.keys(d).forEach(t=>{d[t].type=null,d[t].msg=""})},A=p(""),de=B(()=>{const t=A.value.trim().toLowerCase();return o.value.filter(l=>t?[l.first_name,l.middle_name,l.last_name].filter(Boolean).join(" ").toLowerCase().includes(t):!0)}),te=B(()=>de.value),Se=B(()=>te.value.length),Ve=B(()=>de.value.length),q=p(0),qe=[x],Ee=()=>{const t=qe[q.value];t&&!t()||q.value++},De=()=>{q.value>0&&q.value--},ae=p(null),ue=t=>String(t),ce=()=>(Array.isArray(_.value)||(_.value=[]),_.value),ie=t=>ce().includes(ue(t)),me=(t,l)=>{const r=ce(),W=ue(t),j=r.indexOf(W);l?j===-1&&r.push(W):j!==-1&&r.splice(j,1)},Ce=t=>{me(t,!ie(t))};return(t,l)=>(c(),E(we,{modelValue:C.value,"onUpdate:modelValue":l[13]||(l[13]=r=>C.value=r),"full-height":"",position:"right",persistent:"",square:"",class:"dialog",onBeforeShow:l[14]||(l[14]=r=>k())},{default:s(()=>[e(h,{class:"dialog-card column full-height"},{default:s(()=>[e(g,{class:"q-pa-lg"},{default:s(()=>[a("div",Ie,f(X(N).isEdit?"modify overtime application":"create new overtime application"),1)]),_:1}),e(ge,{inset:""}),e(g,{class:"col q-pa-lg scroll"},{default:s(()=>[e(ye,{name:"fade-slide",mode:"out-in"},{default:s(()=>[(c(),y("div",{key:q.value},[q.value===0?(c(),y("div",Re,[l[16]||(l[16]=a("div",{class:"text-overline text-uppercase text-bold q-mb-md"},"personnel",-1)),a("div",Be,[a("div",{class:R(["text-caption text-uppercase q-mb-sm",d.personnels.type?"text-negative text-italic":"text-grey"])},f(d.personnels.type?d.personnels.msg:"employee"),3),a("div",He,[a("div",Me,[te.value.length?b("",!0):(c(),E(h,{key:0,class:"card card-menu card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm"},{default:s(()=>[e(g,null,{default:s(()=>l[15]||(l[15]=[a("div",{class:"text-caption text-dark text-uppercase"},"no record found",-1)])),_:1,__:[15]})]),_:1}))]),te.value?.length?(c(!0),y(J,{key:0},K(te.value,(r,W)=>(c(),y("div",{key:`data-${r.id}`,class:"inner-card-anim-wrapper",style:_e({animationDelay:`${W*100}ms`})},[e(h,{class:R(["card card-menu card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm",{"card--active":ie(r.id)}]),onClick:j=>Ce(r.id)},{default:s(()=>[e(g,null,{default:s(()=>[a("div",Ye,f(i(r)),1)]),_:2},1024),a("div",We,[e(Oe,{"model-value":ie(r.id),"onUpdate:modelValue":j=>me(r.id,j),"checked-icon":"bi-check-circle-fill","unchecked-icon":"bi-check-circle",size:"xs",onClick:l[0]||(l[0]=Le(()=>{},["stop"]))},null,8,["model-value","onUpdate:modelValue"])])]),_:2},1032,["class","onClick"])],4))),128)):b("",!0)])])])):b("",!0),q.value===1?(c(),y("div",Ge,[a("div",Xe,[a("div",Ze,[a("div",{class:R(["text-caption text-uppercase",d.date.type?"text-negative text-italic":"text-grey"])},f(d.date.type?d.date.msg:"date"),3),e(G,{outlined:"",modelValue:w.value,"onUpdate:modelValue":l[3]||(l[3]=r=>w.value=r),label:"Enter Date",error:d.date.type,"no-error-icon":!0},{default:s(()=>[e(re,{cover:"","transition-show":"scale","transition-hide":"scale",ref_key:"popup",ref:ae,class:"no-shadow custom-border radius-sm"},{default:s(()=>[e(Fe,{modelValue:w.value,"onUpdate:modelValue":[l[1]||(l[1]=r=>w.value=r),l[2]||(l[2]=()=>{ae.value.hide()})],mask:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},512)]),_:1},8,["modelValue","error"])])]),a("div",Je,[a("div",Ke,[a("div",{class:R(["text-caption text-uppercase",d.timeStart.type?"text-negative text-italic":"text-grey"])},f(d.timeStart.type?d.timeStart.msg:"start time"),3),e(G,{outlined:"",modelValue:m.value,"onUpdate:modelValue":l[5]||(l[5]=r=>m.value=r),label:"Enter Time",error:d.timeStart.type,"no-error-icon":!0,mask:"##:##","fill-mask":""},{default:s(()=>[e(re,{cover:"","transition-show":"scale","transition-hide":"scale",ref_key:"popup",ref:ae,class:"no-shadow custom-border radius-sm"},{default:s(()=>[e(fe,{modelValue:m.value,"onUpdate:modelValue":l[4]||(l[4]=r=>m.value=r),mask:"HH:mm"},{default:s(()=>[a("div",et,[le(e($,{label:"Okay",color:"primary",flat:"",size:"sm"},null,512),[[ve]])])]),_:1},8,["modelValue"])]),_:1},512)]),_:1},8,["modelValue","error"])]),a("div",tt,[a("div",{class:R(["text-caption text-uppercase",d.timeEnd.type?"text-negative text-italic":"text-grey"])},f(d.timeEnd.type?d.timeEnd.msg:"time end"),3),e(G,{outlined:"",modelValue:S.value,"onUpdate:modelValue":l[7]||(l[7]=r=>S.value=r),label:"Enter Time",error:d.timeEnd.type,"no-error-icon":!0,mask:"##:##","fill-mask":""},{default:s(()=>[e(re,{cover:"","transition-show":"scale","transition-hide":"scale",ref_key:"popup",ref:ae,class:"no-shadow custom-border radius-sm"},{default:s(()=>[e(fe,{modelValue:S.value,"onUpdate:modelValue":l[6]||(l[6]=r=>S.value=r),mask:"HH:mm"},{default:s(()=>[a("div",at,[le(e($,{label:"Okay",color:"primary",flat:"",size:"sm"},null,512),[[ve]])])]),_:1},8,["modelValue"])]),_:1},512)]),_:1},8,["modelValue","error"])])]),a("div",st,[a("div",lt,[a("div",{class:R(["text-caption text-uppercase",d.description.type?"text-negative text-italic":"text-grey"])},f(d.description.type?d.description.msg:"description"),3),e(G,{modelValue:O.value,"onUpdate:modelValue":l[8]||(l[8]=r=>O.value=r),outlined:"",type:"textarea",error:d.description.type,"no-error-icon":!0,label:"Enter Content"},null,8,["modelValue","error"])])])])):b("",!0)]))]),_:1})]),_:1}),e(se,{class:"q-pa-lg bg"},{default:s(()=>[a("div",ot,[q.value>0?(c(),E($,{key:0,unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"previous",onClick:l[9]||(l[9]=()=>{De()})})):b("",!0),q.value<xe-1?(c(),E($,{key:1,unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"next",onClick:l[10]||(l[10]=()=>{Ee()})})):b("",!0),q.value===xe-1?(c(),E($,{key:2,unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"save",onClick:v})):b("",!0),e($,{unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"discard",onClick:l[11]||(l[11]=()=>{D("update:modelValue",null)}),outline:""}),q.value===0?(c(),E(G,{key:3,outlined:"",dense:"",debounce:"1000",modelValue:A.value,"onUpdate:modelValue":l[12]||(l[12]=r=>A.value=r),placeholder:"Search Employee..."},{prepend:s(()=>[e(he,{name:"bi-search",style:{"font-size":"1rem"}})]),after:s(()=>[a("div",it,f(Se.value)+" of "+f(Ve.value),1)]),_:1},8,["modelValue"])):b("",!0)])]),_:1}),e($e,{showing:t.submitLoading},{default:s(()=>[l[18]||(l[18]=Te(" <")),e(h,{class:"no-shadow radius-md q-pa-md"},{default:s(()=>[e(g,{class:"text-center"},{default:s(()=>[a("div",null,[e(oe,{color:"dark"})]),l[17]||(l[17]=a("div",{class:"text-dark text-uppercase text-caption"},"we're working on it!",-1))]),_:1,__:[17]})]),_:1})]),_:1,__:[18]},8,["showing"])]),_:1})]),_:1},8,["modelValue"]))}},nt=ke(rt,[["__scopeId","data-v-adff28ff"]]),dt={class:"text-h6 text-uppercase"},ut={class:"q-mb-md"},ct={class:"text-body1 text-uppercase"},mt={class:"q-mb-md"},pt={class:"text-body1 text-uppercase"},vt={class:"q-mb-md"},ft={class:"text-body1 text-uppercase"},xt={class:"q-mb-md"},gt={class:"q-mb-xs"},yt={class:"text-body1 text-uppercase"},_t={class:"text-caption text-uppercase"},ht={class:"row q-col-gutter-xl q-mb-md q-mt-xl"},wt={class:"text-caption text-uppercase text-grey"},bt={key:0},$t=["src"],kt={class:"text-h6 text-uppercase"},St={class:"text-body1 text-uppercase text-italic"},Vt={class:"text-caption text-uppercase text-italic"},qt={class:"row q-gutter-sm"},Et={__name:"OvertimeInfoDialog",props:{modelValue:String,dialogName:String},emits:["update:modelValue","saved"],setup(ee,{emit:H}){const N=be(),Q=ne(),D=ee,C=H,I=B({get:()=>D.modelValue===D.dialogName,set:i=>{i||C("update:modelValue",null)}}),k=p(!1),T=()=>{S()},w=i=>{const o=Array.isArray(i)?i:i?.errors||[];Object.keys(Errors).forEach(n=>{Errors[n].type=null,Errors[n].messages=[]}),o.forEach(n=>{Errors[n.path]!==void 0&&(Errors[n.path].type=!0,Errors[n.path].messages.push(n.msg))})},m=p([]),S=async()=>{k.value=!0;try{const i=await F.get(`/overtime/${Q.data?.id}`);m.value=i.data.result}catch(i){console.error("Error fetching all data:",i),P.fire({icon:"error",html:`
                <div class="text-h6 text-bold text-uppercase">Error</div>
                <div class="text-caption text-capitalize;">Unable to fetch records</div>
            `})}finally{k.value=!1}},O=i=>`https://hris-ccmi.com${i.signature}`,_=i=>{if(!i)return"";const o=i.first_name||"",n=i.middle_name?i.middle_name.charAt(0).toUpperCase()+".":"",V=i.last_name||"",Z=i.suffix?` ${i.suffix}`:"";return`${o} ${n} ${V}${Z}`.trim()},d=i=>i?new Date(i).toLocaleDateString("en-PH",{year:"numeric",month:"long",day:"2-digit"}):"",M=i=>{if(!i?.time_start||!i?.time_end)return"";const o=new Date(`1970-01-01T${i.time_start}`),n=new Date(`1970-01-01T${i.time_end}`),V={hour:"2-digit",minute:"2-digit",hour12:!0};return`${o.toLocaleTimeString("en-PH",V)} - ${n.toLocaleTimeString("en-PH",V)}`},U=i=>i?Ne(i).format("MMMM Do, YYYY hh:mm A"):"",Y=B(()=>{if(!m.value?.approvals||m.value.approvals.length===0)return!1;const o=[...m.value.approvals].sort((n,V)=>n.setting.order-V.setting.order).find(n=>n.status==="Pending");return o?o.setting?.approver?.id===N.user?.id:!1}),L=async i=>{k.value=!0;const o=Number(N.user.id),Z=m.value.approvals.find(A=>Number(A?.setting?.approver_id)===Number(o))?.id??null;try{const A=await F.post(`/overtime/${i}/approve`,{approvalid:Z});C("saved"),C("update:modelValue",null),P.fire({icon:"success",html:`
                <div class="text-h6 text-bold text-uppercase">granted!</div>
                <div class="text-caption text-capitalize;">${A.data.message}<div>
            `})}catch(A){A.response&&A.response.data&&(w(A.response.data),P.fire({icon:"error",html:`
                    <div class="text-h6 text-bold text-uppercase">Request Failed</div>
                    <div class="text-caption">Something went wrong.</div>
                `}))}finally{k.value=!1}},x=async i=>{submitLoading.value=!0;try{const o=await F.post(`/overtime/${i}/cancel`);LoadAll(),OvertimeDialog.value=!1,P.fire({icon:"success",html:`
                <div class="text-h6 text-bold text-uppercase">granted!</div>
                <div class="text-caption text-capitalize;">${o.data.message}<div>
            `})}catch(o){o.response&&o.response.data&&(w(o.response.data),P.fire({icon:"error",html:`
                    <div class="text-h6 text-bold text-uppercase">Request Failed</div>
                    <div class="text-caption">Something went wrong.</div>
                `}))}finally{submitLoading.value=!1}},u=p(!1),v=p(null),z=async i=>{submitLoading.value=!0;try{const o=await F.get(`/overtime/${i}/pdf`,{responseType:"arraybuffer"}),n=new Blob([o.data],{type:"application/pdf"}),V=window.URL.createObjectURL(n)+"#view=FitW";v.value=V,u.value=!0,submitLoading.value=!1}catch(o){submitLoading.value=!1,console.error("Error generating PDF:",o)}};return(i,o)=>(c(),E(we,{modelValue:I.value,"onUpdate:modelValue":o[4]||(o[4]=n=>I.value=n),"full-height":"",position:"right",persistent:"",square:"",class:"dialog",onBeforeShow:o[5]||(o[5]=n=>T())},{default:s(()=>[e(h,{class:"dialog-card column full-height"},{default:s(()=>[e(g,{class:"q-pa-lg"},{default:s(()=>[a("div",dt,f(X(Q).isEdit?"modify overtime application":"create new overtime application"),1)]),_:1}),e(ge,{inset:""}),e(g,{class:"col q-pa-lg scroll"},{default:s(()=>[a("div",ut,[o[6]||(o[6]=a("div",{class:"text-caption text-uppercase text-grey"},"date",-1)),a("div",ct,f(d(m.value?.date)),1)]),a("div",mt,[o[7]||(o[7]=a("div",{class:"text-caption text-uppercase text-grey"},"time",-1)),a("div",pt,f(M(m.value)),1)]),a("div",vt,[o[8]||(o[8]=a("div",{class:"text-caption text-uppercase text-grey"},"status",-1)),a("div",ft,f(m.value?.status),1)]),a("div",xt,[o[9]||(o[9]=a("div",{class:"text-caption text-uppercase text-grey"},"employee",-1)),(c(!0),y(J,null,K(m.value?.applications,n=>(c(),y("div",gt,[a("div",yt,f(_(n.employee)),1),a("div",_t,f(n?.employee?.employment?.position.name),1)]))),256))]),a("div",ht,[(c(!0),y(J,null,K(m.value?.approvals,(n,V)=>(c(),y("div",null,[a("div",wt,f(n?.status=="Pending"?"unsigned":n?.setting?.description),1),n?.status=="Approved"?(c(),y("div",bt,[a("img",{src:O(n?.setting?.approver?.employeeAccount?.employee?.signature),width:"150"},null,8,$t)])):b("",!0),a("div",kt,f(_(n?.setting?.approver?.employeeAccount?.employee)),1),a("div",St,f(n?.setting?.approver?.employeeAccount?.employee?.employment?.position?.name),1),a("div",Vt,f(U(n?.signed_at)),1)]))),256))])]),_:1}),e(se,{class:"q-pa-lg bg"},{default:s(()=>[a("div",qt,[Y.value&&m.value?.status!=="Cancelled"?(c(),E($,{key:0,unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"approve"},{default:s(()=>[e(pe,{onBeforeShow:()=>{},"transition-show":"jump-up","transition-hide":"jump-down",offset:[0,15],class:"radius-sm",style:{"box-shadow":"rgba(0, 0, 0, 0.09) 0px 3px 12px"}},{default:s(()=>[e(h,{class:"no-shadow radius-sm q-pa-lg",style:{width:"300px"}},{default:s(()=>[e(g,null,{default:s(()=>o[10]||(o[10]=[a("div",{class:"text-h6 text-center text-uppercase"}," proceed to approve ",-1)])),_:1,__:[10]}),e(se,null,{default:s(()=>[e($,{unelevated:"",size:"md",color:"primary",class:"full-width text-capitalize",label:"proceed",onClick:o[0]||(o[0]=n=>L(m.value?.id))})]),_:1})]),_:1})]),_:1})]),_:1})):b("",!0),m.value?.status!=="Cancelled"?(c(),E($,{key:1,unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"cancel"},{default:s(()=>[e(pe,{onBeforeShow:()=>{},"transition-show":"jump-up","transition-hide":"jump-down",offset:[0,15],class:"radius-sm",style:{"box-shadow":"rgba(0, 0, 0, 0.09) 0px 3px 12px"}},{default:s(()=>[e(h,{class:"no-shadow radius-sm q-pa-lg",style:{width:"300px"}},{default:s(()=>[e(g,null,{default:s(()=>o[11]||(o[11]=[a("div",{class:"text-h6 text-center text-uppercase"}," proceed to cancel ",-1)])),_:1,__:[11]}),e(se,null,{default:s(()=>[e($,{unelevated:"",size:"md",color:"primary",class:"full-width text-capitalize",label:"proceed",onClick:o[1]||(o[1]=n=>x(m.value?.id))})]),_:1})]),_:1})]),_:1})]),_:1})):b("",!0),m.value?.status!=="Cancelled"?(c(),E($,{key:2,unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"print",onClick:o[2]||(o[2]=n=>z(m.value?.id))})):b("",!0),e($,{unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"discard",onClick:o[3]||(o[3]=()=>{C("update:modelValue",null)}),outline:""})])]),_:1}),e($e,{showing:k.value},{default:s(()=>[e(h,{class:"no-shadow radius-md q-pa-md"},{default:s(()=>[e(g,{class:"text-center"},{default:s(()=>[a("div",null,[e(oe,{color:"dark"})]),o[12]||(o[12]=a("div",{class:"text-dark text-uppercase text-caption"},"we're working on it!",-1))]),_:1,__:[12]})]),_:1})]),_:1},8,["showing"])]),_:1})]),_:1},8,["modelValue"]))}},Dt=ke(Et,[["__scopeId","data-v-c38fa673"]]),Ct={class:"filter-inline"},zt={class:"q-gutter-xs"},At={class:"card-grid"},Ot={key:0,class:"card-anim-wrapper",style:{animationDelay:"120ms"}},Lt={key:1,class:"card-anim-wrapper",style:{animationDelay:"120ms"}},Tt={key:2,class:"card-anim-wrapper",style:{animationDelay:"120ms"}},Ut={class:"text-subtitle2 text-uppercase"},Pt={class:"text-caption text-capitalize"},Qt={class:"text-caption text-capitalize text-grey"},jt={id:"glass-overlay"},Wt={__name:"OvertimePage",setup(ee){const H=ne(),N=be(),Q=new Date,D=p(String(Q.getMonth()+1).padStart(2,"0")),C=p(String(Q.getFullYear())),I=Array.from({length:12},(x,u)=>{const v=new Date(0,u).toLocaleString("en-US",{month:"short"}),z=String(u+1).padStart(2,"0");return{label:v,value:z}}),k=p(!1);p(!1);const T=p([]),w=p({}),m=p(1),S=p(10),O=p(""),_=async()=>{k.value=!0;try{const{data:x}=await F.get("/overtime",{params:{Page:m.value,Limit:S.value,Filter:O.value||"",month:D.value,year:C.value}});T.value=x.data,w.value=x.meta}catch(x){console.error("Error fetching all data:",x),P.fire({icon:"error",html:`
                <div class="text-h6 text-bold text-uppercase">Error</div>
                <div class="text-caption text-capitalize;">Unable to fetch records</div>
            `})}finally{k.value=!1}},d=x=>x?new Date(x).toLocaleDateString("en-PH",{year:"numeric",month:"long",day:"2-digit"}):"",M=x=>{if(!x?.time_start||!x?.time_end)return"";const u=new Date(`1970-01-01T${x.time_start}`),v=new Date(`1970-01-01T${x.time_end}`),z={hour:"2-digit",minute:"2-digit",hour12:!0};return`${u.toLocaleTimeString("en-PH",z)} - ${v.toLocaleTimeString("en-PH",z)}`};Ue(()=>{_()});const U=p(null),Y=x=>{U.value=x},L=p(!0);return Pe(()=>{setTimeout(()=>{L.value=!1},1e3)}),(x,u)=>(c(),y("div",null,[e(h,{class:"no-shadow radius-xs q-mb-md"},{default:s(()=>[e(g,null,{default:s(()=>[a("div",Ct,[e(G,{outlined:"",modelValue:C.value,"onUpdate:modelValue":u[0]||(u[0]=v=>C.value=v),style:{width:"80px"},dense:""},null,8,["modelValue"]),a("div",zt,[(c(!0),y(J,null,K(X(I),(v,z)=>(c(),E($,{round:"",unelevated:"",class:R(D.value===v.value?"active":"inactive"),onClick:()=>{D.value=v.value,_()},size:"md",label:v.label},null,8,["class","onClick","label"]))),256))])])]),_:1})]),_:1}),a("div",At,[X(N).hasRole(["SuperAdmin","Admin","HR"])?(c(),y("div",Ot,[le((c(),E(h,{key:"data-add",class:"card card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm",onClick:u[1]||(u[1]=()=>{Y("OvertimeDialog"),X(H).isEdit=!1})},{default:s(()=>[e(g,null,{default:s(()=>[e(he,{name:"bi-plus-circle",color:"grey",size:"xl"})]),_:1})]),_:1})),[[je]])])):b("",!0),k.value?(c(),y("div",Lt,[e(h,{key:"data-add",class:"card card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm"},{default:s(()=>[e(g,{class:"text-center"},{default:s(()=>[e(oe,{color:"dark"}),u[6]||(u[6]=a("div",{class:"text-caption text-grey text-uppercase q-mt-xs"},"we're working on it!",-1))]),_:1,__:[6]})]),_:1})])):!k.value&&T.value.length===0?(c(),y("div",Tt,[e(h,{key:"data-add",class:"card card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm"},{default:s(()=>[e(g,null,{default:s(()=>u[7]||(u[7]=[a("div",{class:"text-caption text-uppercase text-grey"},"no data found",-1)])),_:1,__:[7]})]),_:1})])):(c(!0),y(J,{key:3},K(T.value,(v,z)=>(c(),y("div",{key:`data-${v.id}`,class:"card-anim-wrapper",style:_e({animationDelay:`${z*120}ms`})},[e(h,{onClick:()=>{Y("OvertimeInfoDialog"),X(H).data=v},class:"card card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm"},{default:s(()=>[e(g,null,{default:s(()=>[a("div",Ut,f(d(v?.date)),1),a("div",Pt,f(M(v)),1)]),_:2},1024),e(g,{class:"text-center full-width q-pa-sm"},{default:s(()=>[a("div",Qt,f(v?.status),1)]),_:2},1024)]),_:2},1032,["onClick"])],4))),128))]),e(nt,{modelValue:U.value,"onUpdate:modelValue":u[2]||(u[2]=v=>U.value=v),"dialog-name":"OvertimeDialog",onSaved:u[3]||(u[3]=()=>{_()})},null,8,["modelValue"]),e(Dt,{modelValue:U.value,"onUpdate:modelValue":u[4]||(u[4]=v=>U.value=v),"dialog-name":"OvertimeInfoDialog",onSaved:u[5]||(u[5]=()=>{_()})},null,8,["modelValue"]),e(ye,{name:"glass-fade"},{default:s(()=>[le(a("div",jt,[e(h,{class:"no-shadow radius-md q-pa-md"},{default:s(()=>[e(g,{class:"text-center"},{default:s(()=>[a("div",null,[e(oe,{color:"dark"})]),u[8]||(u[8]=a("div",{class:"text-dark text-uppercase text-caption"},"we're working on it!",-1))]),_:1,__:[8]})]),_:1})],512),[[Qe,L.value]])]),_:1})]))}};export{Wt as default};
