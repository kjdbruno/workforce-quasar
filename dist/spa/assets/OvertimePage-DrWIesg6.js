import{b as R,r as p,O as ze,_ as E,$ as c,a0 as s,a2 as e,a9 as h,ab as g,a4 as a,a7 as f,a3 as J,ac as ge,an as ye,aa as y,a1 as b,af as B,ad as X,ae as Z,ao as _e,ap as Ae,br as Oe,ak as W,j as le,a5 as $,ar as se,a8 as he,a6 as Le,ah as we,aq as F,T as be,Y as Te,n as Ue,am as Pe,ag as Qe}from"./index-DUj6Qat5.js";import{Q as $e,a as oe}from"./QInnerLoading-BjTJWTbo.js";import{T as P}from"./sweetalert-CVlrw-cm.js";import{Q as pe,h as je}from"./moment-BVHJYo2c.js";import{u as ne}from"./overtime-store-f0CPcvtM.js";import{Q as Fe}from"./QDate-Dbu_svyZ.js";import{Q as ie,C as ve}from"./ClosePopup-B7_6mH7x.js";import{Q as fe}from"./QTime-CFRY-gxn.js";import{_ as ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./format-CoaQEihs.js";import"./TouchPan-BqeUlPzf.js";const Ne={class:"text-h6 text-uppercase"},Ie={key:0},Be={class:"q-mb-md"},Re={class:"card-grid"},Me={class:"inner-card-anim-wrapper",style:{animationDelay:"100ms"}},He={class:"text-caption text-dark text-uppercase"},Ye={class:"absolute-left"},Ge={key:1},We={class:"row q-col-gutter-xs q-mb-md"},Je={class:"col-2"},Ke={class:"row q-col-gutter-xs q-mb-md"},Xe={class:"col-2"},Ze={class:"row items-center justify-end"},et={class:"col-2"},tt={class:"row items-center justify-end"},at={class:"row q-col-gutter-xs q-mb-xl"},st={class:"col-4"},lt={class:"row q-gutter-sm"},ot={class:"text-caption text-uppercase text-grey"},xe=2,rt={__name:"OvertimeDialog",props:{modelValue:String,dialogName:String},emits:["update:modelValue","saved"],setup(ee,{emit:M}){const N=ne(),Q=ee,D=M,C=R({get:()=>Q.modelValue===Q.dialogName,set:t=>{t||D("update:modelValue",null)}}),I=p(!1),k=()=>{n(),V(),q.value=0},T=p(""),w=p(""),m=p(""),S=p(""),O=p(""),_=p([]),d=ze({date:{type:null,message:""},timeStart:{type:null,message:""},timeEnd:{type:null,message:""},description:{type:null,message:""},personnels:{type:null,message:""}}),H=()=>P.fire({icon:"error",html:`
        <div class="text-h6 text-bold text-uppercase">Request Failed</div>
        <div class="text-caption">Something went wrong.</div>
        `}),U=(t,l="required")=>(d[t].type=!0,d[t].msg=l,!0),Y=t=>(d[t].type=null,d[t].msg="",!1),L=(t,l)=>l?Y(t):U(t,"required"),x=()=>{let t=!1;return(!Array.isArray(_.value)||_.value.length===0)&&(L("personnels",null),t=!0),t&&H(),!t},u=()=>{let t=!1;return t||=L("date",w.value),t||=L("timeStart",m.value),t||=L("timeEnd",S.value),t||=L("description",O.value),t&&H(),!t},v=async()=>{if(!(u&&!u())){I.value=!0;try{const t=T.value&&N.isEdit?await F.post(`/overtime/${T.value}/update`,{date:w.value,timeStart:m.value,timeEnd:S.value,description:O.value,employees:_.value}):await F.post("/overtime",{date:w.value,timeStart:m.value,timeEnd:S.value,description:O.value,employees:_.value});D("saved"),D("update:modelValue",null),P.fire({icon:"success",html:`
                <div class="text-h6 text-bold text-uppercase">granted!</div>
                <div class="text-caption text-capitalize;">${t.data.message}<div>
            `})}catch(t){t.response&&t.response.data&&(z(t.response.data),P.fire({icon:"error",html:`
                    <div class="text-h6 text-bold text-uppercase">Request Failed</div>
                    <div class="text-caption">Something went wrong.</div>
                `}))}finally{I.value=!1}}},z=t=>{const l=Array.isArray(t)?t:t?.errors||[];Object.keys(d).forEach(i=>{d[i].type=null,d[i].messages=[]}),l.forEach(i=>{d[i.path]!==void 0&&(d[i.path].type=!0,d[i.path].messages.push(i.msg))})},r=t=>{if(!t)return"";const l=t.first_name||"",i=t.middle_name?t.middle_name.charAt(0).toUpperCase()+".":"",G=t.last_name||"",j=t.suffix?` ${t.suffix}`:"";return`${l} ${i} ${G}${j}`.trim()},o=p([]),n=async()=>{try{const{data:t}=await F.get("/leave/option/employee");o.value=t}catch(t){console.error("Error fetching options:",t)}},V=()=>{T.value="",w.value=new Date().toISOString().split("T")[0],m.value="",S.value="",O.value="",_.value=[],K()},K=()=>{Object.keys(d).forEach(t=>{d[t].type=null,d[t].msg=""})},A=p(""),de=R(()=>{const t=A.value.trim().toLowerCase();return o.value.filter(l=>t?[l.first_name,l.middle_name,l.last_name].filter(Boolean).join(" ").toLowerCase().includes(t):!0)}),te=R(()=>de.value),Se=R(()=>te.value.length),Ve=R(()=>de.value.length),q=p(0),qe=[x],Ee=()=>{const t=qe[q.value];t&&!t()||q.value++},De=()=>{q.value>0&&q.value--},ae=p(null),ue=t=>String(t),ce=()=>(Array.isArray(_.value)||(_.value=[]),_.value),re=t=>ce().includes(ue(t)),me=(t,l)=>{const i=ce(),G=ue(t),j=i.indexOf(G);l?j===-1&&i.push(G):j!==-1&&i.splice(j,1)},Ce=t=>{me(t,!re(t))};return(t,l)=>(c(),E(we,{modelValue:C.value,"onUpdate:modelValue":l[13]||(l[13]=i=>C.value=i),"full-height":"",position:"right",persistent:"",square:"",class:"dialog",onBeforeShow:l[14]||(l[14]=i=>k())},{default:s(()=>[e(h,{class:"dialog-card column full-height"},{default:s(()=>[e(g,{class:"q-pa-lg"},{default:s(()=>[a("div",Ne,f(J(N).isEdit?"modify overtime application":"create new overtime application"),1)]),_:1}),e(ge,{inset:""}),e(g,{class:"col q-pa-lg scroll"},{default:s(()=>[e(ye,{name:"fade-slide",mode:"out-in"},{default:s(()=>[(c(),y("div",{key:q.value},[q.value===0?(c(),y("div",Ie,[l[16]||(l[16]=a("div",{class:"text-overline text-uppercase text-bold q-mb-md"},"personnel",-1)),a("div",Be,[a("div",{class:B(["text-caption text-uppercase q-mb-sm",d.personnels.type?"text-negative text-italic":"text-grey"])},f(d.personnels.type?d.personnels.msg:"employee"),3),a("div",Re,[a("div",Me,[te.value.length?b("",!0):(c(),E(h,{key:0,class:"card card-menu card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm"},{default:s(()=>[e(g,null,{default:s(()=>l[15]||(l[15]=[a("div",{class:"text-caption text-dark text-uppercase"},"no record found",-1)])),_:1,__:[15]})]),_:1}))]),te.value?.length?(c(!0),y(X,{key:0},Z(te.value,(i,G)=>(c(),y("div",{key:`data-${i.id}`,class:"inner-card-anim-wrapper",style:_e({animationDelay:`${G*100}ms`})},[e(h,{class:B(["card card-menu card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm",{"card--active":re(i.id)}]),onClick:j=>Ce(i.id)},{default:s(()=>[e(g,null,{default:s(()=>[a("div",He,f(r(i)),1)]),_:2},1024),a("div",Ye,[e(Ae,{"model-value":re(i.id),"onUpdate:modelValue":j=>me(i.id,j),"checked-icon":"bi-check-circle-fill","unchecked-icon":"bi-check-circle",size:"xs",onClick:l[0]||(l[0]=Oe(()=>{},["stop"]))},null,8,["model-value","onUpdate:modelValue"])])]),_:2},1032,["class","onClick"])],4))),128)):b("",!0)])])])):b("",!0),q.value===1?(c(),y("div",Ge,[a("div",We,[a("div",Je,[a("div",{class:B(["text-caption text-uppercase",d.date.type?"text-negative text-italic":"text-grey"])},f(d.date.type?d.date.msg:"date"),3),e(W,{outlined:"",modelValue:w.value,"onUpdate:modelValue":l[3]||(l[3]=i=>w.value=i),label:"Enter Date",error:d.date.type,"no-error-icon":!0},{default:s(()=>[e(ie,{cover:"","transition-show":"scale","transition-hide":"scale",ref_key:"popup",ref:ae,class:"no-shadow custom-border radius-sm"},{default:s(()=>[e(Fe,{modelValue:w.value,"onUpdate:modelValue":[l[1]||(l[1]=i=>w.value=i),l[2]||(l[2]=()=>{ae.value.hide()})],mask:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},512)]),_:1},8,["modelValue","error"])])]),a("div",Ke,[a("div",Xe,[a("div",{class:B(["text-caption text-uppercase",d.timeStart.type?"text-negative text-italic":"text-grey"])},f(d.timeStart.type?d.timeStart.msg:"start time"),3),e(W,{outlined:"",modelValue:m.value,"onUpdate:modelValue":l[5]||(l[5]=i=>m.value=i),label:"Enter Time",error:d.timeStart.type,"no-error-icon":!0,mask:"##:##","fill-mask":""},{default:s(()=>[e(ie,{cover:"","transition-show":"scale","transition-hide":"scale",ref_key:"popup",ref:ae,class:"no-shadow custom-border radius-sm"},{default:s(()=>[e(fe,{modelValue:m.value,"onUpdate:modelValue":l[4]||(l[4]=i=>m.value=i),mask:"HH:mm"},{default:s(()=>[a("div",Ze,[le(e($,{label:"Okay",color:"primary",flat:"",size:"sm"},null,512),[[ve]])])]),_:1},8,["modelValue"])]),_:1},512)]),_:1},8,["modelValue","error"])]),a("div",et,[a("div",{class:B(["text-caption text-uppercase",d.timeEnd.type?"text-negative text-italic":"text-grey"])},f(d.timeEnd.type?d.timeEnd.msg:"time end"),3),e(W,{outlined:"",modelValue:S.value,"onUpdate:modelValue":l[7]||(l[7]=i=>S.value=i),label:"Enter Time",error:d.timeEnd.type,"no-error-icon":!0,mask:"##:##","fill-mask":""},{default:s(()=>[e(ie,{cover:"","transition-show":"scale","transition-hide":"scale",ref_key:"popup",ref:ae,class:"no-shadow custom-border radius-sm"},{default:s(()=>[e(fe,{modelValue:S.value,"onUpdate:modelValue":l[6]||(l[6]=i=>S.value=i),mask:"HH:mm"},{default:s(()=>[a("div",tt,[le(e($,{label:"Okay",color:"primary",flat:"",size:"sm"},null,512),[[ve]])])]),_:1},8,["modelValue"])]),_:1},512)]),_:1},8,["modelValue","error"])])]),a("div",at,[a("div",st,[a("div",{class:B(["text-caption text-uppercase",d.description.type?"text-negative text-italic":"text-grey"])},f(d.description.type?d.description.msg:"description"),3),e(W,{modelValue:O.value,"onUpdate:modelValue":l[8]||(l[8]=i=>O.value=i),outlined:"",type:"textarea",error:d.description.type,"no-error-icon":!0,label:"Enter Content"},null,8,["modelValue","error"])])])])):b("",!0)]))]),_:1})]),_:1}),e(se,{class:"q-pa-lg bg"},{default:s(()=>[a("div",lt,[q.value>0?(c(),E($,{key:0,unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"previous",onClick:l[9]||(l[9]=()=>{De()})})):b("",!0),q.value<xe-1?(c(),E($,{key:1,unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"next",onClick:l[10]||(l[10]=()=>{Ee()})})):b("",!0),q.value===xe-1?(c(),E($,{key:2,unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"save",onClick:v})):b("",!0),e($,{unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"discard",onClick:l[11]||(l[11]=()=>{D("update:modelValue",null)}),outline:""}),q.value===0?(c(),E(W,{key:3,outlined:"",dense:"",debounce:"1000",modelValue:A.value,"onUpdate:modelValue":l[12]||(l[12]=i=>A.value=i),placeholder:"Search Employee..."},{prepend:s(()=>[e(he,{name:"bi-search",style:{"font-size":"1rem"}})]),after:s(()=>[a("div",ot,f(Se.value)+" of "+f(Ve.value),1)]),_:1},8,["modelValue"])):b("",!0)])]),_:1}),e($e,{showing:t.submitLoading},{default:s(()=>[l[18]||(l[18]=Le(" <")),e(h,{class:"no-shadow radius-md q-pa-md"},{default:s(()=>[e(g,{class:"text-center"},{default:s(()=>[a("div",null,[e(oe,{color:"dark"})]),l[17]||(l[17]=a("div",{class:"text-dark text-uppercase text-caption"},"we're working on it!",-1))]),_:1,__:[17]})]),_:1})]),_:1,__:[18]},8,["showing"])]),_:1})]),_:1},8,["modelValue"]))}},it=ke(rt,[["__scopeId","data-v-adff28ff"]]),nt={class:"text-h6 text-uppercase"},dt={class:"q-mb-md"},ut={class:"text-body1 text-uppercase"},ct={class:"q-mb-md"},mt={class:"text-body1 text-uppercase"},pt={class:"q-mb-md"},vt={class:"text-body1 text-uppercase"},ft={class:"q-mb-md"},xt={class:"q-mb-xs"},gt={class:"text-body1 text-uppercase"},yt={class:"text-caption text-uppercase"},_t={class:"row q-col-gutter-xl q-mb-md q-mt-xl"},ht={class:"text-caption text-uppercase text-grey"},wt={key:0},bt=["src"],$t={class:"text-h6 text-uppercase"},kt={class:"text-body1 text-uppercase text-italic"},St={class:"text-caption text-uppercase text-italic"},Vt={class:"row q-gutter-sm"},qt={__name:"OvertimeInfoDialog",props:{modelValue:String,dialogName:String},emits:["update:modelValue","saved"],setup(ee,{emit:M}){const N=be(),Q=ne(),D=ee,C=M,I=R({get:()=>D.modelValue===D.dialogName,set:r=>{r||C("update:modelValue",null)}}),k=p(!1),T=()=>{S()},w=r=>{const o=Array.isArray(r)?r:r?.errors||[];Object.keys(Errors).forEach(n=>{Errors[n].type=null,Errors[n].messages=[]}),o.forEach(n=>{Errors[n.path]!==void 0&&(Errors[n.path].type=!0,Errors[n.path].messages.push(n.msg))})},m=p([]),S=async()=>{k.value=!0;try{const r=await F.get(`/overtime/${Q.data?.id}`);m.value=r.data.result}catch(r){console.error("Error fetching all data:",r),P.fire({icon:"error",html:`
                <div class="text-h6 text-bold text-uppercase">Error</div>
                <div class="text-caption text-capitalize;">Unable to fetch records</div>
            `})}finally{k.value=!1}},O=r=>`https://hris-ccmi.com${r.signature}`,_=r=>{if(!r)return"";const o=r.first_name||"",n=r.middle_name?r.middle_name.charAt(0).toUpperCase()+".":"",V=r.last_name||"",K=r.suffix?` ${r.suffix}`:"";return`${o} ${n} ${V}${K}`.trim()},d=r=>r?new Date(r).toLocaleDateString("en-PH",{year:"numeric",month:"long",day:"2-digit"}):"",H=r=>{if(!r?.time_start||!r?.time_end)return"";const o=new Date(`1970-01-01T${r.time_start}`),n=new Date(`1970-01-01T${r.time_end}`),V={hour:"2-digit",minute:"2-digit",hour12:!0};return`${o.toLocaleTimeString("en-PH",V)} - ${n.toLocaleTimeString("en-PH",V)}`},U=r=>r?je(r).format("MMMM Do, YYYY hh:mm A"):"",Y=R(()=>{if(!m.value?.approvals||m.value.approvals.length===0)return!1;const o=[...m.value.approvals].sort((n,V)=>n.setting.order-V.setting.order).find(n=>n.status==="Pending");return o?o.setting?.approver?.id===N.user?.id:!1}),L=async r=>{k.value=!0;const o=Number(N.user.id),K=m.value.approvals.find(A=>Number(A?.setting?.approver_id)===Number(o))?.id??null;try{const A=await F.post(`/overtime/${r}/approve`,{approvalid:K});C("saved"),C("update:modelValue",null),P.fire({icon:"success",html:`
                <div class="text-h6 text-bold text-uppercase">granted!</div>
                <div class="text-caption text-capitalize;">${A.data.message}<div>
            `})}catch(A){A.response&&A.response.data&&(w(A.response.data),P.fire({icon:"error",html:`
                    <div class="text-h6 text-bold text-uppercase">Request Failed</div>
                    <div class="text-caption">Something went wrong.</div>
                `}))}finally{k.value=!1}},x=async r=>{submitLoading.value=!0;try{const o=await F.post(`/overtime/${r}/cancel`);LoadAll(),OvertimeDialog.value=!1,P.fire({icon:"success",html:`
                <div class="text-h6 text-bold text-uppercase">granted!</div>
                <div class="text-caption text-capitalize;">${o.data.message}<div>
            `})}catch(o){o.response&&o.response.data&&(w(o.response.data),P.fire({icon:"error",html:`
                    <div class="text-h6 text-bold text-uppercase">Request Failed</div>
                    <div class="text-caption">Something went wrong.</div>
                `}))}finally{submitLoading.value=!1}},u=p(!1),v=p(null),z=async r=>{submitLoading.value=!0;try{const o=await F.get(`/overtime/${r}/pdf`,{responseType:"arraybuffer"}),n=new Blob([o.data],{type:"application/pdf"}),V=window.URL.createObjectURL(n)+"#view=FitW";v.value=V,u.value=!0,submitLoading.value=!1}catch(o){submitLoading.value=!1,console.error("Error generating PDF:",o)}};return(r,o)=>(c(),E(we,{modelValue:I.value,"onUpdate:modelValue":o[4]||(o[4]=n=>I.value=n),"full-height":"",position:"right",persistent:"",square:"",class:"dialog",onBeforeShow:o[5]||(o[5]=n=>T())},{default:s(()=>[e(h,{class:"dialog-card column full-height"},{default:s(()=>[e(g,{class:"q-pa-lg"},{default:s(()=>[a("div",nt,f(J(Q).isEdit?"modify overtime application":"create new overtime application"),1)]),_:1}),e(ge,{inset:""}),e(g,{class:"col q-pa-lg scroll"},{default:s(()=>[a("div",dt,[o[6]||(o[6]=a("div",{class:"text-caption text-uppercase text-grey"},"date",-1)),a("div",ut,f(d(m.value?.date)),1)]),a("div",ct,[o[7]||(o[7]=a("div",{class:"text-caption text-uppercase text-grey"},"time",-1)),a("div",mt,f(H(m.value)),1)]),a("div",pt,[o[8]||(o[8]=a("div",{class:"text-caption text-uppercase text-grey"},"status",-1)),a("div",vt,f(m.value?.status),1)]),a("div",ft,[o[9]||(o[9]=a("div",{class:"text-caption text-uppercase text-grey"},"employee",-1)),(c(!0),y(X,null,Z(m.value?.applications,n=>(c(),y("div",xt,[a("div",gt,f(_(n.employee)),1),a("div",yt,f(n?.employee?.employment?.position.name),1)]))),256))]),a("div",_t,[(c(!0),y(X,null,Z(m.value?.approvals,(n,V)=>(c(),y("div",null,[a("div",ht,f(n?.status=="Pending"?"unsigned":n?.setting?.description),1),n?.status=="Approved"?(c(),y("div",wt,[a("img",{src:O(n?.setting?.approver?.employeeAccount?.employee?.signature),width:"150"},null,8,bt)])):b("",!0),a("div",$t,f(_(n?.setting?.approver?.employeeAccount?.employee)),1),a("div",kt,f(n?.setting?.approver?.employeeAccount?.employee?.employment?.position?.name),1),a("div",St,f(U(n?.signed_at)),1)]))),256))])]),_:1}),e(se,{class:"q-pa-lg bg"},{default:s(()=>[a("div",Vt,[Y.value&&m.value?.status!=="Cancelled"?(c(),E($,{key:0,unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"approve"},{default:s(()=>[e(pe,{onBeforeShow:()=>{},"transition-show":"jump-up","transition-hide":"jump-down",offset:[0,15],class:"radius-sm",style:{"box-shadow":"rgba(0, 0, 0, 0.09) 0px 3px 12px"}},{default:s(()=>[e(h,{class:"no-shadow radius-sm q-pa-lg",style:{width:"300px"}},{default:s(()=>[e(g,null,{default:s(()=>o[10]||(o[10]=[a("div",{class:"text-h6 text-center text-uppercase"}," proceed to approve ",-1)])),_:1,__:[10]}),e(se,null,{default:s(()=>[e($,{unelevated:"",size:"md",color:"primary",class:"full-width text-capitalize",label:"proceed",onClick:o[0]||(o[0]=n=>L(m.value?.id))})]),_:1})]),_:1})]),_:1})]),_:1})):b("",!0),m.value?.status!=="Cancelled"?(c(),E($,{key:1,unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"cancel"},{default:s(()=>[e(pe,{onBeforeShow:()=>{},"transition-show":"jump-up","transition-hide":"jump-down",offset:[0,15],class:"radius-sm",style:{"box-shadow":"rgba(0, 0, 0, 0.09) 0px 3px 12px"}},{default:s(()=>[e(h,{class:"no-shadow radius-sm q-pa-lg",style:{width:"300px"}},{default:s(()=>[e(g,null,{default:s(()=>o[11]||(o[11]=[a("div",{class:"text-h6 text-center text-uppercase"}," proceed to cancel ",-1)])),_:1,__:[11]}),e(se,null,{default:s(()=>[e($,{unelevated:"",size:"md",color:"primary",class:"full-width text-capitalize",label:"proceed",onClick:o[1]||(o[1]=n=>x(m.value?.id))})]),_:1})]),_:1})]),_:1})]),_:1})):b("",!0),m.value?.status!=="Cancelled"?(c(),E($,{key:2,unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"print",onClick:o[2]||(o[2]=n=>z(m.value?.id))})):b("",!0),e($,{unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"discard",onClick:o[3]||(o[3]=()=>{C("update:modelValue",null)}),outline:""})])]),_:1}),e($e,{showing:k.value},{default:s(()=>[e(h,{class:"no-shadow radius-md q-pa-md"},{default:s(()=>[e(g,{class:"text-center"},{default:s(()=>[a("div",null,[e(oe,{color:"dark"})]),o[12]||(o[12]=a("div",{class:"text-dark text-uppercase text-caption"},"we're working on it!",-1))]),_:1,__:[12]})]),_:1})]),_:1},8,["showing"])]),_:1})]),_:1},8,["modelValue"]))}},Et=ke(qt,[["__scopeId","data-v-c38fa673"]]),Dt={class:"filter-inline"},Ct={class:"q-gutter-xs"},zt={class:"card-grid"},At={key:0,class:"card-anim-wrapper",style:{animationDelay:"120ms"}},Ot={key:1,class:"card-anim-wrapper",style:{animationDelay:"120ms"}},Lt={key:2,class:"card-anim-wrapper",style:{animationDelay:"120ms"}},Tt={class:"text-subtitle2 text-uppercase"},Ut={class:"text-caption text-capitalize"},Pt={class:"text-caption text-capitalize text-grey"},Qt={id:"glass-overlay"},Jt={__name:"OvertimePage",setup(ee){const M=ne(),N=be(),Q=new Date,D=p(String(Q.getMonth()+1).padStart(2,"0")),C=p(String(Q.getFullYear())),I=Array.from({length:12},(x,u)=>{const v=new Date(0,u).toLocaleString("en-US",{month:"short"}),z=String(u+1).padStart(2,"0");return{label:v,value:z}}),k=p(!1);p(!1);const T=p([]),w=p({}),m=p(1),S=p(10),O=p(""),_=async()=>{k.value=!0;try{const{data:x}=await F.get("/overtime",{params:{Page:m.value,Limit:S.value,Filter:O.value||"",month:D.value,year:C.value}});T.value=x.data,w.value=x.meta}catch(x){console.error("Error fetching all data:",x),P.fire({icon:"error",html:`
                <div class="text-h6 text-bold text-uppercase">Error</div>
                <div class="text-caption text-capitalize;">Unable to fetch records</div>
            `})}finally{k.value=!1}},d=x=>x?new Date(x).toLocaleDateString("en-PH",{year:"numeric",month:"long",day:"2-digit"}):"",H=x=>{if(!x?.time_start||!x?.time_end)return"";const u=new Date(`1970-01-01T${x.time_start}`),v=new Date(`1970-01-01T${x.time_end}`),z={hour:"2-digit",minute:"2-digit",hour12:!0};return`${u.toLocaleTimeString("en-PH",z)} - ${v.toLocaleTimeString("en-PH",z)}`};Te(()=>{_()});const U=p(null),Y=x=>{U.value=x},L=p(!0);return Ue(()=>{setTimeout(()=>{L.value=!1},1e3)}),(x,u)=>(c(),y("div",null,[e(h,{class:"no-shadow radius-xs q-mb-md"},{default:s(()=>[e(g,null,{default:s(()=>[a("div",Dt,[e(W,{outlined:"",modelValue:C.value,"onUpdate:modelValue":u[0]||(u[0]=v=>C.value=v),style:{width:"80px"},dense:""},null,8,["modelValue"]),a("div",Ct,[(c(!0),y(X,null,Z(J(I),(v,z)=>(c(),E($,{round:"",unelevated:"",class:B(D.value===v.value?"active":"inactive"),onClick:()=>{D.value=v.value,_()},size:"md",label:v.label},null,8,["class","onClick","label"]))),256))])])]),_:1})]),_:1}),a("div",zt,[J(N).hasRole(["SuperAdmin","Management"])?(c(),y("div",At,[le((c(),E(h,{key:"data-add",class:"card card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm",onClick:u[1]||(u[1]=()=>{Y("OvertimeDialog"),J(M).isEdit=!1})},{default:s(()=>[e(g,null,{default:s(()=>[e(he,{name:"bi-plus-circle",color:"grey",size:"xl"})]),_:1})]),_:1})),[[Qe]])])):b("",!0),k.value?(c(),y("div",Ot,[e(h,{key:"data-add",class:"card card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm"},{default:s(()=>[e(g,{class:"text-center"},{default:s(()=>[e(oe,{color:"dark"}),u[6]||(u[6]=a("div",{class:"text-caption text-grey text-uppercase q-mt-xs"},"we're working on it!",-1))]),_:1,__:[6]})]),_:1})])):!k.value&&T.value.length===0?(c(),y("div",Lt,[e(h,{key:"data-add",class:"card card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm"},{default:s(()=>[e(g,null,{default:s(()=>u[7]||(u[7]=[a("div",{class:"text-caption text-uppercase text-grey"},"no data found",-1)])),_:1,__:[7]})]),_:1})])):(c(!0),y(X,{key:3},Z(T.value,(v,z)=>(c(),y("div",{key:`data-${v.id}`,class:"card-anim-wrapper",style:_e({animationDelay:`${z*120}ms`})},[e(h,{onClick:()=>{Y("OvertimeInfoDialog"),J(M).data=v},class:"card card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm"},{default:s(()=>[e(g,null,{default:s(()=>[a("div",Tt,f(d(v?.date)),1),a("div",Ut,f(H(v)),1)]),_:2},1024),e(g,{class:"text-center full-width q-pa-sm"},{default:s(()=>[a("div",Pt,f(v?.status),1)]),_:2},1024)]),_:2},1032,["onClick"])],4))),128))]),e(it,{modelValue:U.value,"onUpdate:modelValue":u[2]||(u[2]=v=>U.value=v),"dialog-name":"OvertimeDialog",onSaved:u[3]||(u[3]=()=>{_()})},null,8,["modelValue"]),e(Et,{modelValue:U.value,"onUpdate:modelValue":u[4]||(u[4]=v=>U.value=v),"dialog-name":"OvertimeInfoDialog",onSaved:u[5]||(u[5]=()=>{_()})},null,8,["modelValue"]),e(ye,{name:"glass-fade"},{default:s(()=>[le(a("div",Qt,[e(h,{class:"no-shadow radius-md q-pa-md"},{default:s(()=>[e(g,{class:"text-center"},{default:s(()=>[a("div",null,[e(oe,{color:"dark"})]),u[8]||(u[8]=a("div",{class:"text-dark text-uppercase text-caption"},"we're working on it!",-1))]),_:1,__:[8]})]),_:1})],512),[[Pe,L.value]])]),_:1})]))}};export{Jt as default};
