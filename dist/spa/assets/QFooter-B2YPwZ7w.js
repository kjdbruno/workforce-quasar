import{c as K,C as ne,s as le,bl as z,D as ie,g as U,r as T,b as u,bm as re,E as se,bn as ue,F as ce,bo as de,w as v,o as B,bp as _,bq as j,k as fe,h as w,an as ve,d as he,b1 as me,i as ge,e as F,l as ye,N as be,B as Te}from"./index-DUj6Qat5.js";import{v as we,a as $,u as Se,p as N,b as pe,c as Pe,d as Oe,r as W,s as Ce,e as I}from"./moment-BVHJYo2c.js";import{Q as He}from"./QResizeObserver-DvN4Q8-d.js";const ke=K({name:"QTooltip",inheritAttrs:!1,props:{...Se,...ie,...z,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...z.transitionShow,default:"jump-down"},transitionHide:{...z.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:$},self:{type:String,default:"top middle",validator:$},offset:{type:Array,default:()=>[14,14],validator:we},scrollTarget:le,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...ne],setup(t,{slots:C,emit:y,attrs:d}){let o,i;const s=U(),{proxy:{$q:r}}=s,c=T(null),h=T(!1),S=u(()=>N(t.anchor,r.lang.rtl)),p=u(()=>N(t.self,r.lang.rtl)),H=u(()=>t.persistent!==!0),{registerTick:x,removeTick:q}=re(),{registerTimeout:a}=se(),{transitionProps:f,transitionStyle:E}=ue(t),{localScrollTarget:P,changeScrollEvent:k,unconfigureScrollTarget:O}=pe(t,D),{anchorEl:e,canShow:l,anchorEvents:m}=Pe({showing:h,configureAnchorEl:te}),{show:G,hide:V}=ce({showing:h,canShow:l,handleShow:X,handleHide:Y,hideOnRouteChange:H,processOnMount:!0});Object.assign(m,{delayShow:Z,delayHide:ee});const{showPortal:L,hidePortal:R,renderPortal:J}=de(s,c,ae,"tooltip");if(r.platform.is.mobile===!0){const n={anchorEl:e,innerRef:c,onClickOutside(g){return V(g),g.target.classList.contains("q-dialog__backdrop")&&me(g),!0}},Q=u(()=>t.modelValue===null&&t.persistent!==!0&&h.value===!0);v(Q,g=>{(g===!0?Oe:W)(n)}),B(()=>{W(n)})}function X(n){L(),x(()=>{i=new MutationObserver(()=>b()),i.observe(c.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),b(),D()}),o===void 0&&(o=v(()=>r.screen.width+"|"+r.screen.height+"|"+t.self+"|"+t.anchor+"|"+r.lang.rtl,b)),a(()=>{L(!0),y("show",n)},t.transitionDuration)}function Y(n){q(),R(),A(),a(()=>{R(!0),y("hide",n)},t.transitionDuration)}function A(){i!==void 0&&(i.disconnect(),i=void 0),o!==void 0&&(o(),o=void 0),O(),_(m,"tooltipTemp")}function b(){Ce({targetEl:c.value,offset:t.offset,anchorEl:e.value,anchorOrigin:S.value,selfOrigin:p.value,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function Z(n){if(r.platform.is.mobile===!0){I(),document.body.classList.add("non-selectable");const Q=e.value,g=["touchmove","touchcancel","touchend","click"].map(M=>[Q,M,"delayHide","passiveCapture"]);j(m,"tooltipTemp",g)}a(()=>{G(n)},t.delay)}function ee(n){r.platform.is.mobile===!0&&(_(m,"tooltipTemp"),I(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),a(()=>{V(n)},t.hideDelay)}function te(){if(t.noParentEvent===!0||e.value===null)return;const n=r.platform.is.mobile===!0?[[e.value,"touchstart","delayShow","passive"]]:[[e.value,"mouseenter","delayShow","passive"],[e.value,"mouseleave","delayHide","passive"]];j(m,"anchor",n)}function D(){if(e.value!==null||t.scrollTarget!==void 0){P.value=fe(e.value,t.scrollTarget);const n=t.noParentEvent===!0?b:V;k(P.value,n)}}function oe(){return h.value===!0?w("div",{...d,ref:c,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",d.class],style:[d.style,E.value],role:"tooltip"},he(C.default)):null}function ae(){return w(ve,f.value,oe)}return B(A),Object.assign(s.proxy,{updatePosition:b}),J}}),Ve=K({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(t,{slots:C,emit:y}){const{proxy:{$q:d}}=U(),o=ge(ye,F);if(o===F)return console.error("QFooter needs to be child of QLayout"),F;const i=T(parseInt(t.heightHint,10)),s=T(!0),r=T(be.value===!0||o.isContainer.value===!0?0:window.innerHeight),c=u(()=>t.reveal===!0||o.view.value.indexOf("F")!==-1||d.platform.is.ios&&o.isContainer.value===!0),h=u(()=>o.isContainer.value===!0?o.containerHeight.value:r.value),S=u(()=>{if(t.modelValue!==!0)return 0;if(c.value===!0)return s.value===!0?i.value:0;const e=o.scroll.value.position+h.value+i.value-o.height.value;return e>0?e:0}),p=u(()=>t.modelValue!==!0||c.value===!0&&s.value!==!0),H=u(()=>t.modelValue===!0&&p.value===!0&&t.reveal===!0),x=u(()=>"q-footer q-layout__section--marginal "+(c.value===!0?"fixed":"absolute")+"-bottom"+(t.bordered===!0?" q-footer--bordered":"")+(p.value===!0?" q-footer--hidden":"")+(t.modelValue!==!0?" q-layout--prevent-focus"+(c.value!==!0?" hidden":""):"")),q=u(()=>{const e=o.rows.value.bottom,l={};return e[0]==="l"&&o.left.space===!0&&(l[d.lang.rtl===!0?"right":"left"]=`${o.left.size}px`),e[2]==="r"&&o.right.space===!0&&(l[d.lang.rtl===!0?"left":"right"]=`${o.right.size}px`),l});function a(e,l){o.update("footer",e,l)}function f(e,l){e.value!==l&&(e.value=l)}function E({height:e}){f(i,e),a("size",e)}function P(){if(t.reveal!==!0)return;const{direction:e,position:l,inflectionPoint:m}=o.scroll.value;f(s,e==="up"||l-m<100||o.height.value-h.value-l-i.value<300)}function k(e){H.value===!0&&f(s,!0),y("focusin",e)}v(()=>t.modelValue,e=>{a("space",e),f(s,!0),o.animate()}),v(S,e=>{a("offset",e)}),v(()=>t.reveal,e=>{e===!1&&f(s,t.modelValue)}),v(s,e=>{o.animate(),y("reveal",e)}),v([i,o.scroll,o.height],P),v(()=>d.screen.height,e=>{o.isContainer.value!==!0&&f(r,e)});const O={};return o.instances.footer=O,t.modelValue===!0&&a("size",i.value),a("space",t.modelValue),a("offset",S.value),B(()=>{o.instances.footer===O&&(o.instances.footer=void 0,a("size",0),a("offset",0),a("space",!1))}),()=>{const e=Te(C.default,[w(He,{debounce:0,onResize:E})]);return t.elevated===!0&&e.push(w("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),w("footer",{class:x.value,style:q.value,onFocusin:k},e)}}});export{ke as Q,Ve as a};
