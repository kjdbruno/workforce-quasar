import{U as le,b as se,r as m,_ as F,$ as d,a0 as s,a2 as a,a9 as T,ab as D,a4 as t,ac as ve,a7 as y,a3 as C,ak as Q,aa as h,ad as Y,ae as H,a5 as V,af as oe,a1 as R,ar as ae,ah as de,aq as W,T as xe,W as ze,O as he,w as ye,Y as be,n as we,ao as $e,j as X,ag as me,a8 as pe,a6 as J,am as qe,an as Ve,ap as Pe,aw as Ce}from"./index-Cu1pZszk.js";import{a as ke,b as De}from"./QResizeObserver-DDDdqUEf.js";import{Q as K,a as Se}from"./QFooter-QtDD_AzG.js";import{Q as fe,a as ne}from"./QInnerLoading-CQz1IH3N.js";import{T as M}from"./sweetalert-Cvt3LSDQ.js";import{h as ee,Q as ue}from"./moment-BaBDi5-X.js";import{Q as re}from"./QBadge-CEUdJlxy.js";import{Q as Te}from"./QDate-Cit8v-bY.js";import{Q as ge}from"./QTime-Nrpp_zvs.js";import{Q as _e,C as ce}from"./ClosePopup-CUx4_UpO.js";import{_ as Ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./format-CoaQEihs.js";import"./TouchPan-CRt2K-DO.js";const Ae={class:"q-mb-md"},Le={class:"text-body1 text-uppercase"},Re={class:"filter-inline q-mb-md"},Fe={class:"q-gutter-xs"},Ne={class:"q-mb-xl"},Qe={class:"row q-col-gutter-xs q-mb-xs"},Ee={class:"col-1"},Me={class:"col-1"},Be={class:"col-10"},je={class:"row items-center q-gutter-xs"},Oe={class:"q-gutter-sm"},Ye={__name:"LogDialog",props:{modelValue:String,dialogName:String},emits:["update:modelValue"],setup(G,{emit:N}){const k=le(),b=G,g=N,z=se({get:()=>b.modelValue===b.dialogName,set:f=>{f||g("update:modelValue",null)}}),U=new Date,p=m(String(U.getMonth()+1).padStart(2,"0")),u=m(String(U.getFullYear())),B=Array.from({length:12},(f,r)=>{const i=new Date(0,r).toLocaleString("en-US",{month:"short"}),$=String(r+1).padStart(2,"0");return{label:i,value:$}}),E=m(!1),L=()=>{q()},x=m([]),q=async()=>{E.value=!0;try{const f=await W.get(`/log/${k.data?.id}`,{params:{month:p.value,year:u.value}}),{data:r,employee_id:i}=f.data;x.value=r}catch(f){console.error("Error fetching all data:",f),M.fire({icon:"error",html:`
                <div class="text-h6 text-bold text-uppercase">Error</div>
                <div class="text-caption text-capitalize;">Unable to fetch records</div>
            `})}finally{E.value=!1}},w=f=>{if(!f)return"";const r=f.first_name||"",i=f.middle_name?f.middle_name.charAt(0).toUpperCase()+".":"",$=f.last_name||"",P=f.suffix?` ${f.suffix}`:"";return`${r} ${i} ${$}${P}`.trim()},I=f=>f?ee(f).format("DD"):"",Z=f=>f?ee(f).format("dddd"):"";return(f,r)=>(d(),F(de,{modelValue:z.value,"onUpdate:modelValue":r[2]||(r[2]=i=>z.value=i),"full-height":"",position:"right",persistent:"",square:"",class:"dialog",onBeforeShow:r[3]||(r[3]=i=>L())},{default:s(()=>[a(T,{class:"dialog-card column full-height"},{default:s(()=>[a(D,{class:"q-pa-lg"},{default:s(()=>r[4]||(r[4]=[t("div",{class:"text-h6 text-uppercase"},"daily time records",-1)])),_:1,__:[4]}),a(ve,{inset:""}),a(D,{class:"col q-pa-lg scroll"},{default:s(()=>[t("div",Ae,[r[5]||(r[5]=t("div",{class:"text-caption text-uppercase text-grey"},"employee",-1)),t("div",Le,y(w(C(k).data)),1)]),r[6]||(r[6]=t("div",{class:"q-mb-sm"},[t("span",{class:"text-subtitle1 text-uppercase text-bold q-mr-md"},"daily time record")],-1)),t("div",Re,[a(Q,{outlined:"",modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=i=>u.value=i),style:{width:"80px"},dense:""},null,8,["modelValue"]),t("div",Fe,[(d(!0),h(Y,null,H(C(B),(i,$)=>(d(),F(V,{round:"",unelevated:"",class:oe(p.value===i.value?"active":"inactive"),onClick:()=>{p.value=i.value,q()},size:"md",label:i.label},null,8,["class","onClick","label"]))),256))])]),r[7]||(r[7]=t("div",{class:"row q-col-gutter-xs"},[t("div",{class:"col-1"},[t("div",{class:"q-mb-xs"},[t("span",{class:"text-caption text-uppercase text-grey q-mr-sm"},"date")])]),t("div",{class:"col-1"},[t("div",{class:"q-mb-xs"},[t("span",{class:"text-caption text-uppercase text-grey q-mr-sm"},"day")])]),t("div",{class:"col-1"},[t("div",{class:"q-mb-xs"},[t("span",{class:"text-caption text-uppercase text-grey q-mr-sm"},"records")])])],-1)),t("div",Ne,[(d(!0),h(Y,null,H(x.value,(i,$)=>(d(),h("div",Qe,[t("div",Ee,[a(Q,{outlined:"",dense:"","model-value":I(i.date)},null,8,["model-value"])]),t("div",Me,[a(Q,{outlined:"",dense:"","model-value":Z(i.date)},null,8,["model-value"])]),t("div",Be,[t("div",je,[(d(!0),h(Y,null,H(i.times,(P,j)=>(d(),F(Q,{outlined:"",dense:"",modelValue:i.times[j],"onUpdate:modelValue":te=>i.times[j]=te,style:{width:"100px"},readonly:!0},null,8,["modelValue","onUpdate:modelValue"]))),256)),i.leaveType?(d(),F(re,{key:0,rounded:"",color:"primary",label:i.leaveType,class:"text-uppercase"},null,8,["label"])):R("",!0),i.holiday?(d(),F(re,{key:1,rounded:"",color:"primary",label:i.holiday,class:"text-uppercase"},null,8,["label"])):R("",!0),i.overtimes?(d(),F(re,{key:2,rounded:"",color:"primary",label:i.overtimes,class:"text-uppercase"},null,8,["label"])):R("",!0)])])]))),256))])]),_:1,__:[6,7]}),a(ae,{class:"q-pa-lg bg"},{default:s(()=>[t("div",Oe,[a(V,{unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"discard",onClick:r[1]||(r[1]=()=>{g("update:modelValue",null)}),outline:""})])]),_:1}),a(fe,{showing:E.value},{default:s(()=>[a(T,{class:"no-shadow radius-md q-pa-md"},{default:s(()=>[a(D,{class:"text-center"},{default:s(()=>[t("div",null,[a(ne,{color:"dark"})]),r[8]||(r[8]=t("div",{class:"text-dark text-uppercase text-caption"},"we're working on it!",-1))]),_:1,__:[8]})]),_:1})]),_:1},8,["showing"])]),_:1})]),_:1},8,["modelValue"]))}},Ie={class:"dtr-wrapper"},He={class:"card-grid"},We={key:0,class:"card-anim-wrapper",style:{animationDelay:"120ms"}},Ke={class:"text-caption text-uppercase"},Ge={class:"text-subtitle2 text-uppercase"},Je={class:"text-caption text-uppercase"},Xe={class:"text-caption text-grey"},Ze={class:"text-caption text-grey text-italic"},et={class:"text-caption text-uppercase"},tt={id:"glass-overlay"},at={__name:"LogsComponent",setup(G){xe(),ze();const N=le();m(!1),m(!1),m(!1),m(""),m(new Date().toISOString().split("T")[0]),m(new Date().toISOString().split("T")[0]),m(!1),he({dateStart:{type:null,message:""},dateEnd:{type:null,message:""}});const k=m([]),b=m({}),g=m(1),z=m(10),U=m(!1),p=m(""),u=async()=>{U.value=!0;try{const{data:r}=await W.get("/log",{params:{Page:g.value,Limit:z.value,Filter:p.value||""}});k.value=r.data,b.value=r.meta}catch(r){console.error("Error fetching all data:",r),M.fire({icon:"error",html:`
                <div class="text-h6 text-bold text-uppercase">Error</div>
                <div class="text-caption text-capitalize;">Unable to fetch records</div>
            `})}finally{U.value=!1}};ye(p,()=>{g.value=1,u()});const B=()=>{g.value<b.value.TotalPages&&(g.value++,u())},E=()=>{g.value>1&&(g.value--,u())},L=()=>{g.value>1&&(g.value=1,u())},x=()=>{g.value<b.value.TotalPages&&(g.value=b.value.TotalPages,u())},q=r=>{if(!r)return"";const i=r.first_name||"",$=r.middle_name?r.middle_name.charAt(0).toUpperCase()+".":"",P=r.last_name||"",j=r.suffix?` ${r.suffix}`:"";return`${i} ${$} ${P}${j}`.trim()};function w(r,i="PHP"){if(!r)return"";const $=r.split("|")[0].trim(),P=parseFloat($.replace(/,/g,""));return isNaN(P)?r:P.toLocaleString("en-PH",{style:"currency",currency:i,minimumFractionDigits:2})}be(()=>{u()});const I=m(null),Z=r=>{I.value=r},f=m(!0);return we(()=>{setTimeout(()=>{f.value=!1},1e3)}),(r,i)=>(d(),h("div",Ie,[t("div",He,[k.value.length===0?(d(),h("div",We,[a(T,{class:"card card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm",tag:"label"},{default:s(()=>[a(D,null,{default:s(()=>i[2]||(i[2]=[t("div",{class:"text-caption text-grey text-uppercase"},"no data found",-1)])),_:1,__:[2]})]),_:1})])):R("",!0),(d(!0),h(Y,null,H(k.value,($,P)=>(d(),h("div",{key:`data-${$.id}`,class:"card-anim-wrapper",style:$e({animationDelay:`${P*120}ms`})},[X((d(),F(T,{onClick:()=>{Z("LogDialog"),C(N).data=$},class:"card card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm"},{default:s(()=>[a(D,null,{default:s(()=>[t("div",Ke,y($?.employment?.employee_no),1),t("div",Ge,y(q($)),1)]),_:2},1024),a(D,null,{default:s(()=>[t("div",Je,y($?.employment?.position?.name),1),t("div",Xe,y($?.employment?.employment_status),1),t("div",Ze,y(w($?.employment?.position?.amount)),1)]),_:2},1024),t("div",{class:oe(["absolute-top-left q-ma-sm",$.status=="Active"?"bg-positive":"bg-negative"]),style:{width:"7px",height:"7px","border-radius":"50%"}},null,2)]),_:2},1032,["onClick"])),[[me]])],4))),128))]),a(Se,{class:"bg-white no-shadow q-mx-lg q-mb-md q-py-sm radius-xs text-grey"},{default:s(()=>[a(ke,null,{default:s(()=>[a(De,{class:"text-caption text-uppercase"},{default:s(()=>i[3]||(i[3]=[t("div",null,"© 2025 WORKFORCE. All Rights Reserved.",-1)])),_:1,__:[3]}),a(Q,{outlined:"",dense:"",debounce:"1000",modelValue:p.value,"onUpdate:modelValue":i[0]||(i[0]=$=>p.value=$),placeholder:"Search..."},{before:s(()=>[t("div",et,y(`page ${b.value.CurrentPage} of ${b.value.TotalPages}`),1)]),after:s(()=>[a(V,{unelevated:"",size:"sm",round:"",color:"primary",icon:"bi-arrow-bar-left",disable:g.value<=1,onClick:L},{default:s(()=>[a(K,{anchor:"top middle",self:"top middle","transition-show":"scale","transition-hide":"scale",class:"text-capitalize"},{default:s(()=>i[4]||(i[4]=[J("First Page")])),_:1,__:[4]})]),_:1},8,["disable"]),a(V,{unelevated:"",size:"sm",round:"",color:"primary",icon:"bi-arrow-left-short",disable:g.value<=1,onClick:E},{default:s(()=>[a(K,{anchor:"top middle",self:"top middle","transition-show":"scale","transition-hide":"scale",class:"text-capitalize"},{default:s(()=>i[5]||(i[5]=[J("Previous")])),_:1,__:[5]})]),_:1},8,["disable"]),a(V,{unelevated:"",size:"sm",round:"",color:"primary",icon:"bi-arrow-right-short",disable:g.value>=b.value.TotalPages,onClick:B},{default:s(()=>[a(K,{anchor:"top middle",self:"top middle","transition-show":"scale","transition-hide":"scale",class:"text-capitalize"},{default:s(()=>i[6]||(i[6]=[J("Next")])),_:1,__:[6]})]),_:1},8,["disable"]),a(V,{unelevated:"",size:"sm",round:"",color:"primary",icon:"bi-arrow-bar-right",disable:g.value>=b.value.TotalPages,onClick:x},{default:s(()=>[a(K,{anchor:"top middle",self:"top middle","transition-show":"scale","transition-hide":"scale",class:"text-capitalize"},{default:s(()=>i[7]||(i[7]=[J("Last Page")])),_:1,__:[7]})]),_:1},8,["disable"])]),prepend:s(()=>[a(pe,{name:"bi-search",style:{"font-size":"1rem"}})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(Ye,{modelValue:I.value,"onUpdate:modelValue":i[1]||(i[1]=$=>I.value=$),"dialog-name":"LogDialog"},null,8,["modelValue"]),a(Ve,{name:"glass-fade"},{default:s(()=>[X(t("div",tt,[a(T,{class:"no-shadow radius-md q-pa-md"},{default:s(()=>[a(D,{class:"text-center"},{default:s(()=>[t("div",null,[a(ne,{color:"dark"})]),i[8]||(i[8]=t("div",{class:"text-dark text-uppercase text-caption"},"we're working on it!",-1))]),_:1,__:[8]})]),_:1})],512),[[qe,f.value]])]),_:1})]))}},st={class:"row q-col-gutter-xs q-mb-md"},lt={class:"col-3"},ot={class:"q-gutter-sm"},nt={__name:"AttendanceDialog",props:{modelValue:String,dialogName:String},emits:["update:modelValue","saved"],setup(G,{emit:N}){const k=G,b=N,g=se({get:()=>k.modelValue===k.dialogName,set:x=>{x||b("update:modelValue",null)}}),z=m(!1),U=()=>{p.value=""},p=m(),u=he({date:{type:null,message:""}}),B=()=>{let x=!1;return p.value?u.date.type=null:(u.date.type=!0,u.date.message="required",x=!0),x&&M.fire({icon:"error",html:`
                <div class="text-h6 text-bold text-uppercase">Request Failed</div>
                <div class="text-caption">Something went wrong.</div>
            `}),!x},E=async()=>{if(!B())return;z.value=!0;const x=ee(p.value.from).format("YYYY-MM-DD"),q=ee(p.value.to).format("YYYY-MM-DD");try{const w=await W.post("/socket/attendance/create",{dateStart:x,dateEnd:q});b("update:modelValue",null),b("saved"),M.fire({icon:"success",html:`
                <div class="text-h6 text-bold text-uppercase">granted!</div>
                <div class="text-caption text-capitalize;">${w.data.message}<div>
            `})}catch(w){w.response&&w.response.data&&(L(w.response.data),M.fire({icon:"error",html:`
                    <div class="text-h6 text-bold text-uppercase">Request Failed</div>
                    <div class="text-caption">Something went wrong.</div>
                `}))}finally{z.value=!1}},L=x=>{const q=Array.isArray(x)?x:x?.errors||[];Object.keys(u).forEach(w=>{u[w].type=null,u[w].messages=[]}),q.forEach(w=>{u[w.path]!==void 0&&(u[w.path].type=!0,u[w.path].messages.push(w.msg))})};return m(null),(x,q)=>(d(),F(de,{modelValue:g.value,"onUpdate:modelValue":q[2]||(q[2]=w=>g.value=w),"full-height":"",position:"right",persistent:"",square:"",class:"dialog",onBeforeShow:q[3]||(q[3]=w=>U())},{default:s(()=>[a(T,{class:"dialog-card column full-height"},{default:s(()=>[a(D,{class:"q-pa-lg"},{default:s(()=>q[4]||(q[4]=[t("div",{class:"text-h6 text-uppercase"},"generate attendance",-1)])),_:1,__:[4]}),a(ve,{inset:""}),a(D,{class:"col q-pa-lg scroll"},{default:s(()=>[t("div",st,[t("div",lt,[t("div",{class:oe(["text-caption text-uppercase",u.date.type?"text-negative":"text-grey"])},y(u.date.type?u.date.message:"date range"),3),a(Te,{modelValue:p.value,"onUpdate:modelValue":q[0]||(q[0]=w=>p.value=w),range:"",class:"no-shadow custom-border full-width"},null,8,["modelValue"])])])]),_:1}),a(ae,{class:"q-pa-lg bg"},{default:s(()=>[t("div",ot,[a(V,{unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"save",onClick:E}),a(V,{unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"discard",onClick:q[1]||(q[1]=()=>{b("update:modelValue",null)}),outline:""})])]),_:1}),a(fe,{showing:z.value},{default:s(()=>[a(T,{class:"no-shadow radius-md q-pa-md"},{default:s(()=>[a(D,{class:"text-center"},{default:s(()=>[t("div",null,[a(ne,{color:"dark"})]),q[5]||(q[5]=t("div",{class:"text-dark text-uppercase text-caption"},"we're working on it!",-1))]),_:1,__:[5]})]),_:1})]),_:1},8,["showing"])]),_:1})]),_:1},8,["modelValue"]))}},it={class:"q-mb-md"},rt={class:"text-body1 text-uppercase"},dt={class:"q-mb-md"},ut={class:"text-body1 text-uppercase"},ct={class:"q-mb-xl"},mt={class:"row q-col-gutter-xs q-mb-xs"},pt={class:"col-1"},vt={class:"col-1"},xt={class:"col-1"},ft={class:"row items-center justify-end"},gt={class:"col-1"},_t={class:"row items-center justify-end"},ht={class:"col-1"},yt={class:"col-1"},bt={class:"col-1"},wt={class:"col"},$t={class:"q-gutter-xs q-mt-sm"},qt={class:"row q-col-gutter-xl q-mb-md q-mt-xl"},Vt={class:"text-caption text-uppercase text-grey"},kt={key:0},Dt={class:"text-h6 text-uppercase"},St={class:"text-body1 text-uppercase text-italic"},zt={key:1},Pt={key:0},Ct={class:"text-grey q-mb-lg"},Tt={class:"text-h6 text-uppercase"},Ut={class:"text-body1 text-uppercase text-italic"},At=["src"],Lt={class:"text-h6 text-uppercase"},Rt={class:"text-body1 text-uppercase text-italic"},Ft={class:"text-caption text-uppercase text-italic"},Nt={key:1},Qt=["src"],Et={class:"text-h6 text-uppercase"},Mt={class:"text-body1 text-uppercase text-italic"},Bt={class:"text-caption text-uppercase text-italic"},jt={key:2,class:"q-mt-md"},Ot={class:"q-gutter-sm"},Yt={class:"iframe-container"},It=["src"],Ht={__name:"AttendanceInfoDialog",props:{modelValue:String,dialogName:String},emits:["update:modelValue","saved"],setup(G,{emit:N}){const k=le(),b=xe(),g=G,z=N,U=se({get:()=>g.modelValue===g.dialogName,set:n=>{n||z("update:modelValue",null)}}),p=m(!1),u=()=>{x(),_.value=[]},B=m(""),E=m([]),L=m([]),x=async()=>{p.value=!0;try{const n=await W.get(`/attendance/${k.data?.id}`,{params:{month:k.month,year:k.year}}),{logs:l,approvals:o,id:A}=n.data;E.value=l,B.value=A,L.value=o,console.log("approvals",L.value)}catch(n){console.error("Error fetching all data:",n),M.fire({icon:"error",html:`
                <div class="text-h6 text-bold text-uppercase">Error</div>
                <div class="text-caption text-capitalize;">Unable to fetch records</div>
            `})}finally{p.value=!1}},q=n=>{if(!n)return"";const l=n.first_name||"",o=n.middle_name?n.middle_name.charAt(0).toUpperCase()+".":"",A=n.last_name||"",S=n.suffix?` ${n.suffix}`:"";return`${l} ${o} ${A}${S}`.trim()},w=n=>n?ee(n).format("DD"):"",I=n=>n?ee(n).format("MMMM Do, YYYY hh:mm A"):"",Z=n=>n?ee(n).format("dddd"):"",f=n=>{const l=Number(n)||0;if(l<=0)return"0 min";const o=24*60,A=Math.floor(l/o),S=Math.floor(l%o/60),O=l%60,ie=[];return A&&ie.push(`${A} ${A===1?"day":"days"}`),S&&ie.push(`${S} ${S===1?"hr":"hrs"}`),O&&ie.push(`${O} ${O===1?"min":"mins"}`),ie.join(" ")},r=se(()=>{const n=L.value||[];if(!n.length)return!1;const o=[...n].sort((A,S)=>Number(A.order)-Number(S.order)).find(A=>A.status==="Pending");return o?Number(o.approver_id)===Number(b.user?.id):!1}),i=async n=>{p.value=!0;const l=Number(b.user.id),S=L.value.find(O=>Number(O?.approver_id)===Number(l))?.id??null;try{const O=await W.post(`/attendance/${n}/approve`,{approvalid:S});z("saved"),z("update:modelValue",null),M.fire({icon:"success",html:`
                <div class="text-h6 text-bold text-uppercase">granted!</div>
                <div class="text-caption text-capitalize;">${O.data.message}<div>
            `})}catch(O){O.response&&O.response.data&&(applyBackendErrors(O.response.data),M.fire({icon:"error",html:`
                    <div class="text-h6 text-bold text-uppercase">Request Failed</div>
                    <div class="text-caption">Something went wrong.</div>
                `}))}finally{p.value=!1}},$=async()=>{p.value=!0;try{const n=await W.post(`/attendance/${B.value}/update`,{logs:logs.value});x(),M.fire({icon:"success",html:`
                <div class="text-h6 text-bold text-uppercase">granted!</div>
                <div class="text-caption text-capitalize;">${n.data.message}<div>
            `})}catch(n){n.response&&n.response.data&&(applyBackendErrors(n.response.data),M.fire({icon:"error",html:`
                    <div class="text-h6 text-bold text-uppercase">Request Failed</div>
                    <div class="text-caption">Something went wrong.</div>
                `}))}finally{p.value=!1}},P=m(!1),j=m(null),te=async n=>{p.value=!0;try{const l=await W.get(`/attendance/${n}/pdf`,{responseType:"arraybuffer"}),o=new Blob([l.data],{type:"application/pdf"}),A=window.URL.createObjectURL(o)+"#view=FitW";j.value=A,P.value=!0}catch(l){console.error("Error generating PDF:",l)}finally{p.value=!1}},_=m([]),c=se(()=>Array.isArray(_.value)&&_.value.some(n=>String(n).trim()!=="")),v=async n=>{p.value=!0;try{const l=await W.post(`attendance/${n}/overide`,{signatories:_.value});M.fire({icon:"success",html:`
                <div class="text-h6 text-bold text-uppercase">granted!</div>
                <div class="text-caption text-capitalize;">${l.data.message}<div>
            `}),z("saved"),z("update:modelValue",null)}catch{e.response&&e.response.data&&(applyBackendErrors(e.response.data),M.fire({icon:"error",html:`
                    <div class="text-h6 text-bold text-uppercase">Request Failed</div>
                    <div class="text-caption">Something went wrong.</div>
                `}))}finally{p.value=!1}};return(n,l)=>(d(),h(Y,null,[a(de,{modelValue:U.value,"onUpdate:modelValue":l[6]||(l[6]=o=>U.value=o),"full-height":"",position:"right",persistent:"",square:"",class:"dialog",onBeforeShow:l[7]||(l[7]=o=>u())},{default:s(()=>[a(T,{class:"dialog-card column full-height"},{default:s(()=>[a(D,{class:"q-pa-lg"},{default:s(()=>l[9]||(l[9]=[t("div",{class:"text-h6 text-uppercase"},"daily time records",-1)])),_:1,__:[9]}),a(ve,{inset:""}),a(D,{class:"col q-pa-lg scroll"},{default:s(()=>[t("div",it,[l[10]||(l[10]=t("div",{class:"text-caption text-uppercase text-grey"},"employee",-1)),t("div",rt,y(q(C(k).data?.employee)),1)]),t("div",dt,[l[11]||(l[11]=t("div",{class:"text-caption text-uppercase text-grey"},"status",-1)),t("div",ut,y(C(k).data?.status),1)]),l[13]||(l[13]=t("div",{class:"q-mb-sm"},[t("span",{class:"text-subtitle1 text-uppercase text-bold q-mr-md"},"daily time record")],-1)),l[14]||(l[14]=t("div",{class:"row q-col-gutter-xs"},[t("div",{class:"col-1"},[t("div",{class:"q-mb-xs"},[t("span",{class:"text-caption text-uppercase text-grey q-mr-sm"},"date")])]),t("div",{class:"col-1"},[t("div",{class:"q-mb-xs"},[t("span",{class:"text-caption text-uppercase text-grey q-mr-sm"},"day")])]),t("div",{class:"col-1"},[t("div",{class:"q-mb-xs"},[t("span",{class:"text-caption text-uppercase text-grey q-mr-sm"},"time in")])]),t("div",{class:"col-1"},[t("div",{class:"q-mb-xs"},[t("span",{class:"text-caption text-uppercase text-grey q-mr-sm"},"time out")])]),t("div",{class:"col-1"},[t("div",{class:"q-mb-xs"},[t("span",{class:"text-caption text-uppercase text-grey q-mr-sm"},"late")])]),t("div",{class:"col-1"},[t("div",{class:"q-mb-xs"},[t("span",{class:"text-caption text-uppercase text-grey q-mr-sm"},"undertime")])]),t("div",{class:"col-1"},[t("div",{class:"q-mb-xs"},[t("span",{class:"text-caption text-uppercase text-grey q-mr-sm"},"overtime")])])],-1)),t("div",ct,[(d(!0),h(Y,null,H(E.value,(o,A)=>(d(),h("div",mt,[t("div",pt,[a(Q,{outlined:"",dense:"","model-value":w(o.date)},null,8,["model-value"])]),t("div",vt,[a(Q,{outlined:"",dense:"","model-value":Z(o.date)},null,8,["model-value"])]),t("div",xt,[a(Q,{outlined:"",dense:"",modelValue:o.time_in,"onUpdate:modelValue":S=>o.time_in=S},{default:s(()=>[a(_e,{cover:"","transition-show":"scale","transition-hide":"scale",mask:"##:##","fill-mask":"",ref_for:!0,ref:"popup",class:"no-shadow custom-border radius-sm"},{default:s(()=>[a(ge,{modelValue:o.time_in,"onUpdate:modelValue":S=>o.time_in=S,mask:"HH:mm"},{default:s(()=>[t("div",ft,[X(a(V,{label:"Okay",color:"primary",flat:""},null,512),[[ce]])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1536)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),t("div",gt,[a(Q,{outlined:"",dense:"",modelValue:o.time_out,"onUpdate:modelValue":S=>o.time_out=S},{default:s(()=>[a(_e,{cover:"","transition-show":"scale","transition-hide":"scale",mask:"##:##","fill-mask":"",ref_for:!0,ref:"popup",class:"no-shadow custom-border radius-sm"},{default:s(()=>[a(ge,{modelValue:o.time_out,"onUpdate:modelValue":S=>o.time_out=S,mask:"HH:mm"},{default:s(()=>[t("div",_t,[X(a(V,{label:"Okay",color:"primary",flat:""},null,512),[[ce]])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1536)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),t("div",ht,[a(Q,{outlined:"",dense:"","model-value":f(o.late),readonly:!0},null,8,["model-value"])]),t("div",yt,[a(Q,{outlined:"",dense:"","model-value":f(o.undertime),readonly:!0},null,8,["model-value"])]),t("div",bt,[a(Q,{outlined:"",dense:"","model-value":f(o.overtime),readonly:!0},null,8,["model-value"])]),t("div",wt,[t("div",$t,[o.notes.length?(d(!0),h(Y,{key:0},H(o.notes,S=>(d(),F(re,{rounded:"",color:"primary",label:S.type,class:"text-uppercase cursor-pointer"},{default:s(()=>[a(K,{anchor:"top middle",self:"center middle",class:"text-uppercase"},{default:s(()=>[t("div",null,y(S.name),1)]),_:2},1024)]),_:2},1032,["label"]))),256)):R("",!0)])])]))),256))]),t("div",qt,[(d(!0),h(Y,null,H(L.value,(o,A)=>(d(),h("div",null,[t("div",Vt,y(o?.status=="Pending"?"unsigned":o?.description),1),o?.status=="Pending"?(d(),h("div",kt,[t("div",Dt,y(o?.original_approver_name),1),t("div",St,y(o?.original_approver_position),1)])):R("",!0),o?.status=="Approved"?(d(),h("div",zt,[o?.is_overide?(d(),h("div",Pt,[t("div",Ct,[t("div",Tt,y(o?.original_approver_name),1),t("div",Ut,y(o?.original_approver_position),1)]),l[12]||(l[12]=t("div",{class:"text-caption text-uppercase text-italic text-bold q-mb-lg"},"overiden by",-1)),t("img",{src:o?.override_signature,width:"150"},null,8,At),t("div",Lt,y(o?.override_name),1),t("div",Rt,y(o?.override_position),1),t("div",Ft,y(I(o?.signed_at)),1)])):R("",!0),o?.is_overide?R("",!0):(d(),h("div",Nt,[t("img",{src:o?.original_signature,width:"150"},null,8,Qt),t("div",Et,y(o?.original_approver_name),1),t("div",Mt,y(o?.original_approver_position),1),t("div",Bt,y(I(o?.signed_at)),1)]))])):R("",!0),o?.status=="Pending"&&C(b).hasRole(["SuperAdmin","Management"])?(d(),h("div",jt,[a(Pe,{modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=S=>_.value=S),val:o?.id,label:"Overide","checked-icon":"bi-check-circle-fill","unchecked-icon":"bi-check-circle",size:"sm",class:"tex-caption"},null,8,["modelValue","val"])])):R("",!0)]))),256))])]),_:1,__:[13,14]}),a(ae,{class:"q-pa-lg bg"},{default:s(()=>[t("div",Ot,[C(k).data?.status!="Approved"?(d(),F(V,{key:0,unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"save"},{default:s(()=>[a(ue,{onBeforeShow:()=>{},"transition-show":"jump-up","transition-hide":"jump-down",offset:[0,15],class:"radius-sm",style:{"box-shadow":"rgba(0, 0, 0, 0.09) 0px 3px 12px"}},{default:s(()=>[a(T,{class:"no-shadow radius-sm q-pa-lg",style:{width:"300px"}},{default:s(()=>[a(D,null,{default:s(()=>l[15]||(l[15]=[t("div",{class:"text-h6 text-center text-uppercase"}," proceed to save ",-1)])),_:1,__:[15]}),a(ae,null,{default:s(()=>[a(V,{unelevated:"",size:"md",color:"primary",class:"full-width text-capitalize",label:"proceed",onClick:l[1]||(l[1]=()=>{$()})})]),_:1})]),_:1})]),_:1})]),_:1})):R("",!0),r.value?(d(),F(V,{key:1,unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"approve"},{default:s(()=>[a(ue,{onBeforeShow:()=>{},"transition-show":"jump-up","transition-hide":"jump-down",offset:[0,15],class:"radius-sm",style:{"box-shadow":"rgba(0, 0, 0, 0.09) 0px 3px 12px"}},{default:s(()=>[a(T,{class:"no-shadow radius-sm q-pa-lg",style:{width:"300px"}},{default:s(()=>[a(D,null,{default:s(()=>l[16]||(l[16]=[t("div",{class:"text-h6 text-center text-uppercase"}," proceed to approve ",-1)])),_:1,__:[16]}),a(ae,null,{default:s(()=>[a(V,{unelevated:"",size:"md",color:"primary",class:"full-width text-capitalize",label:"proceed",onClick:l[2]||(l[2]=o=>i(B.value))})]),_:1})]),_:1})]),_:1})]),_:1})):R("",!0),C(k).data?.status=="Pending"&&C(b).hasRole(["SuperAdmin","Management"])?(d(),F(V,{key:2,disable:!c.value,unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"overide"},{default:s(()=>[a(ue,{onBeforeShow:()=>{},"transition-show":"jump-up","transition-hide":"jump-down",offset:[0,15],class:"radius-sm",style:{"box-shadow":"rgba(0, 0, 0, 0.09) 0px 3px 12px"}},{default:s(()=>[a(T,{class:"no-shadow radius-sm q-pa-lg",style:{width:"300px"}},{default:s(()=>[a(D,null,{default:s(()=>l[17]||(l[17]=[t("div",{class:"text-h6 text-center text-uppercase"}," proceed to overide signature ",-1)])),_:1,__:[17]}),a(ae,null,{default:s(()=>[a(V,{unelevated:"",size:"md",color:"primary",class:"full-width text-capitalize",label:"proceed",onClick:l[3]||(l[3]=o=>v(C(k).data?.id))})]),_:1})]),_:1})]),_:1})]),_:1},8,["disable"])):R("",!0),a(V,{unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"print",onClick:l[4]||(l[4]=o=>te(B.value))}),a(V,{unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"discard",onClick:l[5]||(l[5]=()=>{z("update:modelValue",null)}),outline:""})])]),_:1}),a(fe,{showing:p.value},{default:s(()=>[a(T,{class:"no-shadow radius-md q-pa-md"},{default:s(()=>[a(D,{class:"text-center"},{default:s(()=>[t("div",null,[a(ne,{color:"dark"})]),l[18]||(l[18]=t("div",{class:"text-dark text-uppercase text-caption"},"we're working on it!",-1))]),_:1,__:[18]})]),_:1})]),_:1},8,["showing"])]),_:1})]),_:1},8,["modelValue"]),a(de,{modelValue:P.value,"onUpdate:modelValue":l[8]||(l[8]=o=>P.value=o),"full-height":"","full-width":"",class:"pdf"},{default:s(()=>[a(T,{class:"bg-white q-pa-none",style:{height:"100vh",overflow:"hidden"}},{default:s(()=>[X(a(V,{icon:"bi-x",class:"fixed bg-white text-primary shadow-2",round:"",dense:"",style:{top:"15px",right:"15px","z-index":"999"}},null,512),[[ce]]),a(D,{class:"q-pa-none",style:{height:"100%",overflow:"hidden"}},{default:s(()=>[t("div",Yt,[j.value?(d(),h("iframe",{key:0,src:j.value,frameborder:"0"},null,8,It)):R("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Wt={class:"dtr-wrapper"},Kt={class:"filter-inline"},Gt={class:"q-gutter-xs"},Jt={class:"card-grid"},Xt={key:0,class:"card-anim-wrapper"},Zt={key:1,class:"card-anim-wrapper",style:{animationDelay:"120ms"}},ea={class:"text-subtitle2 text-uppercase"},ta={class:"text-caption text-capitalized"},aa={class:"text-caption"},sa={class:"text-caption text-grey"},la={class:"text-caption text-uppercase"},oa={id:"glass-overlay"},na={__name:"DTRComponent",setup(G){const N=xe(),k=le(),b=new Date,g=m(String(b.getMonth()+1).padStart(2,"0")),z=m(String(b.getFullYear())),U=m([]),p=m({}),u=m(1),B=m(10),E=m(!1),L=m(""),x=async()=>{E.value=!0;try{const{data:_}=await W.get("/attendance",{params:{Page:u.value,Limit:B.value,Filter:L.value||"",month:g.value,year:z.value}});U.value=_.data,p.value=_.meta}catch(_){console.error("Error fetching all data:",_),M.fire({icon:"error",html:`
                <div class="text-h6 text-bold text-uppercase">Error</div>
                <div class="text-caption text-capitalize;">Unable to fetch records</div>
            `})}finally{E.value=!1}};ye(L,()=>{u.value=1,x()});const q=()=>{u.value<p.value.TotalPages&&(u.value++,x())},w=()=>{u.value>1&&(u.value--,x())},I=()=>{u.value>1&&(u.value=1,x())},Z=()=>{u.value<p.value.TotalPages&&(u.value=p.value.TotalPages,x())},f=_=>{if(!_)return"";const c=_.first_name||"",v=_.middle_name?_.middle_name.charAt(0).toUpperCase()+".":"",n=_.last_name||"",l=_.suffix?` ${_.suffix}`:"";return`${c} ${v} ${n}${l}`.trim()},r=_=>{const c=new Date(_.date_from),v=new Date(_.date_to),n={month:"short",day:"numeric"},l=c.getFullYear(),o=c.toLocaleDateString("en-US",n),A=v.toLocaleDateString("en-US",n);return c.getMonth()===v.getMonth()?`${o}–${v.getDate()}, ${l}`:`${o} – ${A}, ${l}`},i=_=>{let c=0;const v=new Date(_.date_from),n=new Date(_.date_to);v.setHours(0,0,0,0),n.setHours(0,0,0,0);for(let l=new Date(v);l<=n;l.setDate(l.getDate()+1)){const o=l.getDay();o!==0&&o!==6&&c++}return`${c} ${c===1?"day":"days"}`},$=Array.from({length:12},(_,c)=>{const v=new Date(0,c).toLocaleString("en-US",{month:"short"}),n=String(c+1).padStart(2,"0");return{label:v,value:n}});be(()=>{x()});const P=m(null),j=_=>{P.value=_},te=m(!0);return we(()=>{setTimeout(()=>{te.value=!1},1e3)}),(_,c)=>(d(),h("div",Wt,[a(T,{class:"no-shadow radius-xs q-mb-md"},{default:s(()=>[a(D,null,{default:s(()=>[t("div",Kt,[a(Q,{outlined:"",modelValue:z.value,"onUpdate:modelValue":c[0]||(c[0]=v=>z.value=v),style:{width:"80px"},dense:""},null,8,["modelValue"]),t("div",Gt,[(d(!0),h(Y,null,H(C($),(v,n)=>(d(),F(V,{round:"",unelevated:"",class:oe(g.value===v.value?"active":"inactive"),onClick:()=>{g.value=v.value,x()},size:"md",label:v.label},null,8,["class","onClick","label"]))),256))])])]),_:1})]),_:1}),t("div",Jt,[C(N).hasRole(["SuperAdmin","Admin","HR"])?(d(),h("div",Xt,[X((d(),F(T,{key:"data-add",class:"card card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm",onClick:c[1]||(c[1]=()=>{j("AttendanceDialog")})},{default:s(()=>[a(D,null,{default:s(()=>[a(pe,{name:"bi-plus-circle",color:"grey",size:"xl"})]),_:1})]),_:1})),[[me]])])):R("",!0),U.value.length===0?(d(),h("div",Zt,[a(T,{class:"card card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm",tag:"label"},{default:s(()=>[a(D,null,{default:s(()=>c[5]||(c[5]=[t("div",{class:"text-caption text-grey text-uppercase"},"no data found",-1)])),_:1,__:[5]})]),_:1})])):R("",!0),(d(!0),h(Y,null,H(U.value,(v,n)=>(d(),h("div",{key:`data-${v.id}`,class:"card-anim-wrapper",style:$e({animationDelay:`${n*120}ms`})},[X((d(),F(T,{onClick:()=>{j("AttendanceInfoDialog"),C(k).data=v,C(k).month=g.value,C(k).year=z.value},class:"card card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm"},{default:s(()=>[a(D,null,{default:s(()=>[t("div",ea,y(f(v?.employee)),1),t("div",ta,y(v?.status),1)]),_:2},1024),a(D,null,{default:s(()=>[t("div",aa,y(r(v)),1),t("div",sa,y(i(v)),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[me]])],4))),128))]),a(Se,{class:"bg-white no-shadow q-mx-lg q-mb-md q-py-sm radius-xs text-grey"},{default:s(()=>[a(ke,null,{default:s(()=>[a(De,{class:"text-caption text-uppercase"},{default:s(()=>c[6]||(c[6]=[t("div",null,"© 2025 WORKFORCE. All Rights Reserved.",-1)])),_:1,__:[6]}),a(Q,{outlined:"",dense:"",debounce:"1000",modelValue:L.value,"onUpdate:modelValue":c[2]||(c[2]=v=>L.value=v),placeholder:"Search..."},{before:s(()=>[t("div",la,y(`page ${p.value.CurrentPage} of ${p.value.TotalPages}`),1)]),after:s(()=>[a(V,{unelevated:"",size:"sm",round:"",color:"primary",icon:"bi-arrow-bar-left",disable:u.value<=1,onClick:I},{default:s(()=>[a(K,{anchor:"top middle",self:"top middle","transition-show":"scale","transition-hide":"scale",class:"text-capitalize"},{default:s(()=>c[7]||(c[7]=[J("First Page")])),_:1,__:[7]})]),_:1},8,["disable"]),a(V,{unelevated:"",size:"sm",round:"",color:"primary",icon:"bi-arrow-left-short",disable:u.value<=1,onClick:w},{default:s(()=>[a(K,{anchor:"top middle",self:"top middle","transition-show":"scale","transition-hide":"scale",class:"text-capitalize"},{default:s(()=>c[8]||(c[8]=[J("Previous")])),_:1,__:[8]})]),_:1},8,["disable"]),a(V,{unelevated:"",size:"sm",round:"",color:"primary",icon:"bi-arrow-right-short",disable:u.value>=p.value.TotalPages,onClick:q},{default:s(()=>[a(K,{anchor:"top middle",self:"top middle","transition-show":"scale","transition-hide":"scale",class:"text-capitalize"},{default:s(()=>c[9]||(c[9]=[J("Next")])),_:1,__:[9]})]),_:1},8,["disable"]),a(V,{unelevated:"",size:"sm",round:"",color:"primary",icon:"bi-arrow-bar-right",disable:u.value>=p.value.TotalPages,onClick:Z},{default:s(()=>[a(K,{anchor:"top middle",self:"top middle","transition-show":"scale","transition-hide":"scale",class:"text-capitalize"},{default:s(()=>c[10]||(c[10]=[J("Last Page")])),_:1,__:[10]})]),_:1},8,["disable"])]),prepend:s(()=>[a(pe,{name:"bi-search",style:{"font-size":"1rem"}})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(nt,{modelValue:P.value,"onUpdate:modelValue":c[3]||(c[3]=v=>P.value=v),"dialog-name":"AttendanceDialog",onSaved:x},null,8,["modelValue"]),a(Ht,{modelValue:P.value,"onUpdate:modelValue":c[4]||(c[4]=v=>P.value=v),"dialog-name":"AttendanceInfoDialog",onSaved:x},null,8,["modelValue"]),a(Ve,{name:"glass-fade"},{default:s(()=>[X(t("div",oa,[a(T,{class:"no-shadow radius-md q-pa-md"},{default:s(()=>[a(D,{class:"text-center"},{default:s(()=>[t("div",null,[a(ne,{color:"dark"})]),c[11]||(c[11]=t("div",{class:"text-dark text-uppercase text-caption"},"we're working on it!",-1))]),_:1,__:[11]})]),_:1})],512),[[qe,te.value]])]),_:1})]))}},ia={class:"q-gutter-xs"},ra={class:"q-mt-md"},da={__name:"DailyTimeRecordPage",setup(G){const N=le(),k={LogsComponent:at,DTRComponent:na},b=[{component:"LogsComponent",label:"daily logs"},{component:"DTRComponent",label:"dtr"}];return(g,z)=>(d(),h("div",null,[a(T,{class:"no-shadow radius-xs"},{default:s(()=>[a(D,null,{default:s(()=>[t("div",ia,[(d(),h(Y,null,H(b,(U,p)=>a(V,{unelevated:"",class:oe(C(N).component===`${U.component}`?"bg-primary text-white":"bg-accent"),onClick:u=>C(N).component=`${U.component}`,size:"xs",label:U.label},null,8,["class","onClick","label"])),64))])]),_:1})]),_:1}),t("div",ra,[(d(),F(Ce(k[C(N).component]),{key:C(N).component}))])]))}},$a=Ue(da,[["__scopeId","data-v-4eeacbe4"]]);export{$a as default};
