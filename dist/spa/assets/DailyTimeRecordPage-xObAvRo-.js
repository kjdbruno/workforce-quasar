import{bk as oe,a as le,r as m,V as R,W as u,X as s,Z as a,a4 as C,a6 as S,$ as t,a7 as xe,a2 as y,_ as P,ag as E,a5 as _,a8 as I,a9 as H,a0 as q,aa as ne,Y as F,ai as se,ac as ue,aq as K,S as fe,al as Pe,O as ye,w as be,T as we,k as $e,am as qe,d as te,ab as pe,a3 as ve,a1 as ee,aj as Ve,ak as ke,ar as Ce,at as Te}from"./index-Lf_p_M7O.js";import{a as Se,b as De}from"./QResizeObserver-Bj2nox93.js";import{Q as X,a as ze}from"./QFooter-Bq9OZnDZ.js";import{Q as ge,b as ie,a as Ue}from"./QSpinnerIos-fP6uRLlR.js";import{T as B}from"./sweetalert-_TNglJgc.js";import{h as ae,Q as ce,_ as Ae}from"./_plugin-vue_export-helper-B4qR4-TP.js";import{Q as de}from"./QBadge-DJ1PcQQQ.js";import{Q as _e}from"./QTime-BNrUEwEX.js";import{Q as he,C as me}from"./ClosePopup-9uufxfJk.js";import"./format-CoaQEihs.js";import"./TouchPan-BIj5nABN.js";const Le={class:"q-mb-md"},Fe={class:"text-body1 text-uppercase"},Re={class:"filter-inline q-mb-md"},Ne={class:"q-gutter-xs"},Qe={class:"q-mb-xl"},Ee={class:"row q-col-gutter-xs q-mb-xs"},Me={class:"col-1"},Be={class:"col-1"},je={class:"col-10"},Oe={class:"row items-center q-gutter-xs"},Ye={class:"q-gutter-sm"},Ie={__name:"LogDialog",props:{modelValue:String,dialogName:String},emits:["update:modelValue"],setup(Z,{emit:N}){const V=oe(),b=Z,f=N,z=le({get:()=>b.modelValue===b.dialogName,set:g=>{g||f("update:modelValue",null)}}),T=new Date,p=m(String(T.getMonth()+1).padStart(2,"0")),c=m(String(T.getFullYear())),j=Array.from({length:12},(g,r)=>{const i=new Date(0,r).toLocaleString("en-US",{month:"short"}),w=String(r+1).padStart(2,"0");return{label:i,value:w}}),M=m(!1),A=()=>{$()},v=m([]),$=async()=>{M.value=!0;try{const g=await K.get(`/log/${V.data?.id}`,{params:{month:p.value,year:c.value}}),{data:r,employee_id:i}=g.data;v.value=r}catch(g){console.error("Error fetching all data:",g),B.fire({icon:"error",html:`
                <div class="text-h6 text-bold text-uppercase">Error</div>
                <div class="text-caption text-capitalize;">Unable to fetch records</div>
            `})}finally{M.value=!1}},h=g=>{if(!g)return"";const r=g.first_name||"",i=g.middle_name?g.middle_name.charAt(0).toUpperCase()+".":"",w=g.last_name||"",U=g.suffix?` ${g.suffix}`:"";return`${r} ${i} ${w}${U}`.trim()},W=g=>g?ae(g).format("DD"):"",G=g=>g?ae(g).format("dddd"):"";return(g,r)=>(u(),R(ue,{modelValue:z.value,"onUpdate:modelValue":r[2]||(r[2]=i=>z.value=i),"full-height":"",position:"right",persistent:"",square:"",class:"dialog",onBeforeShow:r[3]||(r[3]=i=>A())},{default:s(()=>[a(C,{class:"dialog-card column full-height"},{default:s(()=>[a(S,{class:"q-pa-lg"},{default:s(()=>r[4]||(r[4]=[t("div",{class:"text-h6 text-uppercase"},"daily time records",-1)])),_:1,__:[4]}),a(xe,{inset:""}),a(S,{class:"col q-pa-lg scroll"},{default:s(()=>[t("div",Le,[r[5]||(r[5]=t("div",{class:"text-caption text-uppercase text-grey"},"employee",-1)),t("div",Fe,y(h(P(V).data)),1)]),r[6]||(r[6]=t("div",{class:"q-mb-sm"},[t("span",{class:"text-subtitle1 text-uppercase text-bold q-mr-md"},"daily time record")],-1)),t("div",Re,[a(E,{outlined:"",modelValue:c.value,"onUpdate:modelValue":r[0]||(r[0]=i=>c.value=i),style:{width:"80px"},dense:""},null,8,["modelValue"]),t("div",Ne,[(u(!0),_(I,null,H(P(j),(i,w)=>(u(),R(q,{round:"",unelevated:"",class:ne(p.value===i.value?"active":"inactive"),onClick:()=>{p.value=i.value,$()},size:"md",label:i.label},null,8,["class","onClick","label"]))),256))])]),r[7]||(r[7]=t("div",{class:"row q-col-gutter-xs"},[t("div",{class:"col-1"},[t("div",{class:"q-mb-xs"},[t("span",{class:"text-caption text-uppercase text-grey q-mr-sm"},"date")])]),t("div",{class:"col-1"},[t("div",{class:"q-mb-xs"},[t("span",{class:"text-caption text-uppercase text-grey q-mr-sm"},"day")])]),t("div",{class:"col-1"},[t("div",{class:"q-mb-xs"},[t("span",{class:"text-caption text-uppercase text-grey q-mr-sm"},"records")])])],-1)),t("div",Qe,[(u(!0),_(I,null,H(v.value,(i,w)=>(u(),_("div",Ee,[t("div",Me,[a(E,{outlined:"",dense:"","model-value":W(i.date)},null,8,["model-value"])]),t("div",Be,[a(E,{outlined:"",dense:"","model-value":G(i.date)},null,8,["model-value"])]),t("div",je,[t("div",Oe,[(u(!0),_(I,null,H(i.times,(U,O)=>(u(),R(E,{outlined:"",dense:"",modelValue:i.times[O],"onUpdate:modelValue":J=>i.times[O]=J,style:{width:"100px"},readonly:!0},null,8,["modelValue","onUpdate:modelValue"]))),256)),i.leaveType?(u(),R(de,{key:0,rounded:"",color:"primary",label:i.leaveType,class:"text-uppercase"},null,8,["label"])):F("",!0),i.holiday?(u(),R(de,{key:1,rounded:"",color:"primary",label:i.holiday,class:"text-uppercase"},null,8,["label"])):F("",!0),i.overtimes?(u(),R(de,{key:2,rounded:"",color:"primary",label:i.overtimes,class:"text-uppercase"},null,8,["label"])):F("",!0)])])]))),256))])]),_:1,__:[6,7]}),a(se,{class:"q-pa-lg bg"},{default:s(()=>[t("div",Ye,[a(q,{unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"discard",onClick:r[1]||(r[1]=()=>{f("update:modelValue",null)}),outline:""})])]),_:1}),a(ge,{showing:M.value},{default:s(()=>[a(C,{class:"no-shadow radius-md q-pa-md"},{default:s(()=>[a(S,{class:"text-center"},{default:s(()=>[t("div",null,[a(ie,{color:"dark"})]),r[8]||(r[8]=t("div",{class:"text-dark text-uppercase text-caption"},"we're working on it!",-1))]),_:1,__:[8]})]),_:1})]),_:1},8,["showing"])]),_:1})]),_:1},8,["modelValue"]))}},He={class:"dtr-wrapper"},We={class:"card-grid"},Ke={key:0,class:"card-anim-wrapper",style:{animationDelay:"120ms"}},Xe={class:"text-caption text-uppercase"},Ze={class:"text-subtitle2 text-uppercase"},Ge={class:"text-caption text-uppercase"},Je={class:"text-caption text-grey"},et={class:"text-caption text-grey text-italic"},tt={class:"text-caption text-uppercase"},at={id:"glass-overlay"},st={__name:"LogsComponent",setup(Z){fe(),Pe();const N=oe();m(!1),m(!1),m(!1),m(""),m(new Date().toISOString().split("T")[0]),m(new Date().toISOString().split("T")[0]),m(!1),ye({dateStart:{type:null,message:""},dateEnd:{type:null,message:""}});const V=m([]),b=m({}),f=m(1),z=m(10),T=m(!1),p=m(""),c=async()=>{T.value=!0;try{const{data:r}=await K.get("/log",{params:{Page:f.value,Limit:z.value,Filter:p.value||""}});V.value=r.data,b.value=r.meta}catch(r){console.error("Error fetching all data:",r),B.fire({icon:"error",html:`
                <div class="text-h6 text-bold text-uppercase">Error</div>
                <div class="text-caption text-capitalize;">Unable to fetch records</div>
            `})}finally{T.value=!1}};be(p,()=>{f.value=1,c()});const j=()=>{f.value<b.value.TotalPages&&(f.value++,c())},M=()=>{f.value>1&&(f.value--,c())},A=()=>{f.value>1&&(f.value=1,c())},v=()=>{f.value<b.value.TotalPages&&(f.value=b.value.TotalPages,c())},$=r=>{if(!r)return"";const i=r.first_name||"",w=r.middle_name?r.middle_name.charAt(0).toUpperCase()+".":"",U=r.last_name||"",O=r.suffix?` ${r.suffix}`:"";return`${i} ${w} ${U}${O}`.trim()};function h(r,i="PHP"){if(!r)return"";const w=r.split("|")[0].trim(),U=parseFloat(w.replace(/,/g,""));return isNaN(U)?r:U.toLocaleString("en-PH",{style:"currency",currency:i,minimumFractionDigits:2})}we(()=>{c()});const W=m(null),G=r=>{W.value=r},g=m(!0);return $e(()=>{setTimeout(()=>{g.value=!1},1e3)}),(r,i)=>(u(),_("div",He,[t("div",We,[V.value.length===0?(u(),_("div",Ke,[a(C,{class:"card card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm",tag:"label"},{default:s(()=>[a(S,null,{default:s(()=>i[2]||(i[2]=[t("div",{class:"text-caption text-grey text-uppercase"},"no data found",-1)])),_:1,__:[2]})]),_:1})])):F("",!0),(u(!0),_(I,null,H(V.value,(w,U)=>(u(),_("div",{key:`data-${w.id}`,class:"card-anim-wrapper",style:qe({animationDelay:`${U*120}ms`})},[te((u(),R(C,{onClick:()=>{G("LogDialog"),P(N).data=w},class:"card card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm"},{default:s(()=>[a(S,null,{default:s(()=>[t("div",Xe,y(w?.employment?.employee_no),1),t("div",Ze,y($(w)),1)]),_:2},1024),a(S,null,{default:s(()=>[t("div",Ge,y(w?.employment?.position?.name),1),t("div",Je,y(w?.employment?.employment_status),1),t("div",et,y(h(w?.employment?.position?.amount)),1)]),_:2},1024),t("div",{class:ne(["absolute-top-left q-ma-sm",w.status=="Active"?"bg-positive":"bg-negative"]),style:{width:"7px",height:"7px","border-radius":"50%"}},null,2)]),_:2},1032,["onClick"])),[[pe]])],4))),128))]),a(ze,{class:"bg-white no-shadow q-mx-lg q-mb-md q-py-sm radius-xs text-grey"},{default:s(()=>[a(Se,null,{default:s(()=>[a(De,{class:"text-caption text-uppercase"},{default:s(()=>i[3]||(i[3]=[t("div",null,"© 2025 WORKFORCE. All Rights Reserved.",-1)])),_:1,__:[3]}),a(E,{outlined:"",dense:"",debounce:"1000",modelValue:p.value,"onUpdate:modelValue":i[0]||(i[0]=w=>p.value=w),placeholder:"Search..."},{before:s(()=>[t("div",tt,y(`page ${b.value.CurrentPage} of ${b.value.TotalPages}`),1)]),after:s(()=>[a(q,{unelevated:"",size:"sm",round:"",color:"primary",icon:"bi-arrow-bar-left",disable:f.value<=1,onClick:A},{default:s(()=>[a(X,{anchor:"top middle",self:"top middle","transition-show":"scale","transition-hide":"scale",class:"text-capitalize"},{default:s(()=>i[4]||(i[4]=[ee("First Page")])),_:1,__:[4]})]),_:1},8,["disable"]),a(q,{unelevated:"",size:"sm",round:"",color:"primary",icon:"bi-arrow-left-short",disable:f.value<=1,onClick:M},{default:s(()=>[a(X,{anchor:"top middle",self:"top middle","transition-show":"scale","transition-hide":"scale",class:"text-capitalize"},{default:s(()=>i[5]||(i[5]=[ee("Previous")])),_:1,__:[5]})]),_:1},8,["disable"]),a(q,{unelevated:"",size:"sm",round:"",color:"primary",icon:"bi-arrow-right-short",disable:f.value>=b.value.TotalPages,onClick:j},{default:s(()=>[a(X,{anchor:"top middle",self:"top middle","transition-show":"scale","transition-hide":"scale",class:"text-capitalize"},{default:s(()=>i[6]||(i[6]=[ee("Next")])),_:1,__:[6]})]),_:1},8,["disable"]),a(q,{unelevated:"",size:"sm",round:"",color:"primary",icon:"bi-arrow-bar-right",disable:f.value>=b.value.TotalPages,onClick:v},{default:s(()=>[a(X,{anchor:"top middle",self:"top middle","transition-show":"scale","transition-hide":"scale",class:"text-capitalize"},{default:s(()=>i[7]||(i[7]=[ee("Last Page")])),_:1,__:[7]})]),_:1},8,["disable"])]),prepend:s(()=>[a(ve,{name:"bi-search",style:{"font-size":"1rem"}})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(Ie,{modelValue:W.value,"onUpdate:modelValue":i[1]||(i[1]=w=>W.value=w),"dialog-name":"LogDialog"},null,8,["modelValue"]),a(ke,{name:"glass-fade"},{default:s(()=>[te(t("div",at,[a(C,{class:"no-shadow radius-md q-pa-md"},{default:s(()=>[a(S,{class:"text-center"},{default:s(()=>[t("div",null,[a(ie,{color:"dark"})]),i[8]||(i[8]=t("div",{class:"text-dark text-uppercase text-caption"},"we're working on it!",-1))]),_:1,__:[8]})]),_:1})],512),[[Ve,g.value]])]),_:1})]))}},lt={class:"row q-col-gutter-xs q-mb-md"},ot={class:"col-3"},nt={class:"q-gutter-sm"},it={__name:"AttendanceDialog",props:{modelValue:String,dialogName:String},emits:["update:modelValue","saved"],setup(Z,{emit:N}){const V=Z,b=N,f=le({get:()=>V.modelValue===V.dialogName,set:v=>{v||b("update:modelValue",null)}}),z=m(!1),T=()=>{p.value=""},p=m(),c=ye({date:{type:null,message:""}}),j=()=>{let v=!1;return p.value?c.date.type=null:(c.date.type=!0,c.date.message="required",v=!0),v&&B.fire({icon:"error",html:`
                <div class="text-h6 text-bold text-uppercase">Request Failed</div>
                <div class="text-caption">Something went wrong.</div>
            `}),!v},M=async()=>{if(!j())return;z.value=!0;const v=ae(p.value.from).format("YYYY-MM-DD"),$=ae(p.value.to).format("YYYY-MM-DD");try{const h=await K.post("/attendance",{dateStart:v,dateEnd:$});b("update:modelValue",null),b("saved"),B.fire({icon:"success",html:`
                <div class="text-h6 text-bold text-uppercase">granted!</div>
                <div class="text-caption text-capitalize;">${h.data.message}<div>
            `})}catch(h){h.response&&h.response.data&&(A(h.response.data),B.fire({icon:"error",html:`
                    <div class="text-h6 text-bold text-uppercase">Request Failed</div>
                    <div class="text-caption">Something went wrong.</div>
                `}))}finally{z.value=!1}},A=v=>{const $=Array.isArray(v)?v:v?.errors||[];Object.keys(c).forEach(h=>{c[h].type=null,c[h].messages=[]}),$.forEach(h=>{c[h.path]!==void 0&&(c[h.path].type=!0,c[h.path].messages.push(h.msg))})};return m(null),(v,$)=>(u(),R(ue,{modelValue:f.value,"onUpdate:modelValue":$[2]||($[2]=h=>f.value=h),"full-height":"",position:"right",persistent:"",square:"",class:"dialog",onBeforeShow:$[3]||($[3]=h=>T())},{default:s(()=>[a(C,{class:"dialog-card column full-height"},{default:s(()=>[a(S,{class:"q-pa-lg"},{default:s(()=>$[4]||($[4]=[t("div",{class:"text-h6 text-uppercase"},"generate attendance",-1)])),_:1,__:[4]}),a(xe,{inset:""}),a(S,{class:"col q-pa-lg scroll"},{default:s(()=>[t("div",lt,[t("div",ot,[t("div",{class:ne(["text-caption text-uppercase",c.date.type?"text-negative":"text-grey"])},y(c.date.type?c.date.message:"date range"),3),a(Ue,{modelValue:p.value,"onUpdate:modelValue":$[0]||($[0]=h=>p.value=h),range:"",class:"no-shadow custom-border full-width"},null,8,["modelValue"])])])]),_:1}),a(se,{class:"q-pa-lg bg"},{default:s(()=>[t("div",nt,[a(q,{unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"save",onClick:M}),a(q,{unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"discard",onClick:$[1]||($[1]=()=>{b("update:modelValue",null)}),outline:""})])]),_:1}),a(ge,{showing:v.submitLoading},{default:s(()=>[a(C,{class:"no-shadow radius-md q-pa-md"},{default:s(()=>[a(S,{class:"text-center"},{default:s(()=>[t("div",null,[a(ie,{color:"dark"})]),$[5]||($[5]=t("div",{class:"text-dark text-uppercase text-caption"},"we're working on it!",-1))]),_:1,__:[5]})]),_:1})]),_:1},8,["showing"])]),_:1})]),_:1},8,["modelValue"]))}},rt={class:"q-mb-md"},dt={class:"text-body1 text-uppercase"},ut={class:"q-mb-md"},ct={class:"text-body1 text-uppercase"},mt={class:"q-mb-xl"},pt={class:"row q-col-gutter-xs q-mb-xs"},vt={class:"col-1"},xt={class:"col-1"},ft={class:"col-1"},gt={class:"row items-center justify-end"},_t={class:"col-1"},ht={class:"row items-center justify-end"},yt={class:"col-1"},bt={class:"col-1"},wt={class:"col-1"},$t={class:"col"},qt={class:"q-gutter-xs q-mt-sm"},Vt={class:"row q-col-gutter-xl q-mb-md q-mt-xl"},kt={class:"text-caption text-uppercase text-grey"},St={key:0},Dt={class:"text-h6 text-uppercase"},zt={class:"text-body1 text-uppercase text-italic"},Pt={key:1},Ct={key:0},Tt={class:"text-grey q-mb-lg"},Ut={class:"text-h6 text-uppercase"},At={class:"text-body1 text-uppercase text-italic"},Lt=["src"],Ft={class:"text-h6 text-uppercase"},Rt={class:"text-body1 text-uppercase text-italic"},Nt={class:"text-caption text-uppercase text-italic"},Qt={key:1},Et=["src"],Mt={class:"text-h6 text-uppercase"},Bt={class:"text-body1 text-uppercase text-italic"},jt={class:"text-caption text-uppercase text-italic"},Ot={key:2,class:"q-mt-md"},Yt={class:"q-gutter-sm"},It={class:"iframe-container"},Ht=["src"],Wt={__name:"AttendanceInfoDialog",props:{modelValue:String,dialogName:String},emits:["update:modelValue","saved"],setup(Z,{emit:N}){const V=oe(),b=fe(),f=Z,z=N,T=le({get:()=>f.modelValue===f.dialogName,set:n=>{n||z("update:modelValue",null)}}),p=m(!1),c=()=>{v(),d.value=[]},j=m(""),M=m([]),A=m([]),v=async()=>{p.value=!0;try{const n=await K.get(`/attendance/${V.data?.id}`,{params:{month:V.month,year:V.year}}),{logs:l,approvals:o,id:L}=n.data;M.value=l,j.value=L,A.value=o,console.log("approvals",A.value)}catch(n){console.error("Error fetching all data:",n),B.fire({icon:"error",html:`
                <div class="text-h6 text-bold text-uppercase">Error</div>
                <div class="text-caption text-capitalize;">Unable to fetch records</div>
            `})}finally{p.value=!1}},$=n=>{if(!n)return"";const l=n.first_name||"",o=n.middle_name?n.middle_name.charAt(0).toUpperCase()+".":"",L=n.last_name||"",D=n.suffix?` ${n.suffix}`:"";return`${l} ${o} ${L}${D}`.trim()},h=n=>`https://hris-ccmi.com${n.signature}`,W=n=>n?ae(n).format("DD"):"",G=n=>n?ae(n).format("MMMM Do, YYYY hh:mm A"):"",g=n=>n?ae(n).format("dddd"):"",r=n=>{const l=Number(n)||0;if(l<=0)return"0 min";const o=24*60,L=Math.floor(l/o),D=Math.floor(l%o/60),Y=l%60,re=[];return L&&re.push(`${L} ${L===1?"day":"days"}`),D&&re.push(`${D} ${D===1?"hr":"hrs"}`),Y&&re.push(`${Y} ${Y===1?"min":"mins"}`),re.join(" ")},i=le(()=>{const n=A.value||[];if(!n.length)return!1;const o=[...n].sort((L,D)=>Number(L.order)-Number(D.order)).find(L=>L.status==="Pending");return o?Number(o.approver_id)===Number(b.user?.id):!1}),w=async n=>{p.value=!0;const l=Number(b.user.id),D=A.value.find(Y=>Number(Y?.approver_id)===Number(l))?.id??null;try{const Y=await K.post(`/attendance/${n}/approve`,{approvalid:D});z("saved"),z("update:modelValue",null),B.fire({icon:"success",html:`
                <div class="text-h6 text-bold text-uppercase">granted!</div>
                <div class="text-caption text-capitalize;">${Y.data.message}<div>
            `})}catch(Y){Y.response&&Y.response.data&&(applyBackendErrors(Y.response.data),B.fire({icon:"error",html:`
                    <div class="text-h6 text-bold text-uppercase">Request Failed</div>
                    <div class="text-caption">Something went wrong.</div>
                `}))}finally{p.value=!1}},U=async()=>{p.value=!0;try{const n=await K.post(`/attendance/${j.value}/update`,{logs:logs.value});v(),B.fire({icon:"success",html:`
                <div class="text-h6 text-bold text-uppercase">granted!</div>
                <div class="text-caption text-capitalize;">${n.data.message}<div>
            `})}catch(n){n.response&&n.response.data&&(applyBackendErrors(n.response.data),B.fire({icon:"error",html:`
                    <div class="text-h6 text-bold text-uppercase">Request Failed</div>
                    <div class="text-caption">Something went wrong.</div>
                `}))}finally{p.value=!1}},O=m(!1),J=m(null),k=async n=>{p.value=!0;try{const l=await K.get(`/attendance/${n}/pdf`,{responseType:"arraybuffer"}),o=new Blob([l.data],{type:"application/pdf"}),L=window.URL.createObjectURL(o)+"#view=FitW";J.value=L,O.value=!0}catch(l){console.error("Error generating PDF:",l)}finally{p.value=!1}},d=m([]),x=le(()=>Array.isArray(d.value)&&d.value.some(n=>String(n).trim()!=="")),Q=async n=>{p.value=!0;try{const l=await K.post(`attendance/${n}/overide`,{signatories:d.value});B.fire({icon:"success",html:`
                <div class="text-h6 text-bold text-uppercase">granted!</div>
                <div class="text-caption text-capitalize;">${l.data.message}<div>
            `}),z("saved"),z("update:modelValue",null)}catch{e.response&&e.response.data&&(applyBackendErrors(e.response.data),B.fire({icon:"error",html:`
                    <div class="text-h6 text-bold text-uppercase">Request Failed</div>
                    <div class="text-caption">Something went wrong.</div>
                `}))}finally{p.value=!1}};return(n,l)=>(u(),_(I,null,[a(ue,{modelValue:T.value,"onUpdate:modelValue":l[6]||(l[6]=o=>T.value=o),"full-height":"",position:"right",persistent:"",square:"",class:"dialog",onBeforeShow:l[7]||(l[7]=o=>c())},{default:s(()=>[a(C,{class:"dialog-card column full-height"},{default:s(()=>[a(S,{class:"q-pa-lg"},{default:s(()=>l[9]||(l[9]=[t("div",{class:"text-h6 text-uppercase"},"daily time records",-1)])),_:1,__:[9]}),a(xe,{inset:""}),a(S,{class:"col q-pa-lg scroll"},{default:s(()=>[t("div",rt,[l[10]||(l[10]=t("div",{class:"text-caption text-uppercase text-grey"},"employee",-1)),t("div",dt,y($(P(V).data?.employee)),1)]),t("div",ut,[l[11]||(l[11]=t("div",{class:"text-caption text-uppercase text-grey"},"status",-1)),t("div",ct,y(P(V).data?.status),1)]),l[13]||(l[13]=t("div",{class:"q-mb-sm"},[t("span",{class:"text-subtitle1 text-uppercase text-bold q-mr-md"},"daily time record")],-1)),l[14]||(l[14]=t("div",{class:"row q-col-gutter-xs"},[t("div",{class:"col-1"},[t("div",{class:"q-mb-xs"},[t("span",{class:"text-caption text-uppercase text-grey q-mr-sm"},"date")])]),t("div",{class:"col-1"},[t("div",{class:"q-mb-xs"},[t("span",{class:"text-caption text-uppercase text-grey q-mr-sm"},"day")])]),t("div",{class:"col-1"},[t("div",{class:"q-mb-xs"},[t("span",{class:"text-caption text-uppercase text-grey q-mr-sm"},"time in")])]),t("div",{class:"col-1"},[t("div",{class:"q-mb-xs"},[t("span",{class:"text-caption text-uppercase text-grey q-mr-sm"},"time out")])]),t("div",{class:"col-1"},[t("div",{class:"q-mb-xs"},[t("span",{class:"text-caption text-uppercase text-grey q-mr-sm"},"late")])]),t("div",{class:"col-1"},[t("div",{class:"q-mb-xs"},[t("span",{class:"text-caption text-uppercase text-grey q-mr-sm"},"undertime")])]),t("div",{class:"col-1"},[t("div",{class:"q-mb-xs"},[t("span",{class:"text-caption text-uppercase text-grey q-mr-sm"},"overtime")])])],-1)),t("div",mt,[(u(!0),_(I,null,H(M.value,(o,L)=>(u(),_("div",pt,[t("div",vt,[a(E,{outlined:"",dense:"","model-value":W(o.date)},null,8,["model-value"])]),t("div",xt,[a(E,{outlined:"",dense:"","model-value":g(o.date)},null,8,["model-value"])]),t("div",ft,[a(E,{outlined:"",dense:"",modelValue:o.time_in,"onUpdate:modelValue":D=>o.time_in=D},{default:s(()=>[a(he,{cover:"","transition-show":"scale","transition-hide":"scale",mask:"##:##","fill-mask":"",ref_for:!0,ref:"popup",class:"no-shadow custom-border radius-sm"},{default:s(()=>[a(_e,{modelValue:o.time_in,"onUpdate:modelValue":D=>o.time_in=D,mask:"HH:mm"},{default:s(()=>[t("div",gt,[te(a(q,{label:"Okay",color:"primary",flat:""},null,512),[[me]])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1536)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),t("div",_t,[a(E,{outlined:"",dense:"",modelValue:o.time_out,"onUpdate:modelValue":D=>o.time_out=D},{default:s(()=>[a(he,{cover:"","transition-show":"scale","transition-hide":"scale",mask:"##:##","fill-mask":"",ref_for:!0,ref:"popup",class:"no-shadow custom-border radius-sm"},{default:s(()=>[a(_e,{modelValue:o.time_out,"onUpdate:modelValue":D=>o.time_out=D,mask:"HH:mm"},{default:s(()=>[t("div",ht,[te(a(q,{label:"Okay",color:"primary",flat:""},null,512),[[me]])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1536)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),t("div",yt,[a(E,{outlined:"",dense:"","model-value":r(o.late),readonly:!0},null,8,["model-value"])]),t("div",bt,[a(E,{outlined:"",dense:"","model-value":r(o.undertime),readonly:!0},null,8,["model-value"])]),t("div",wt,[a(E,{outlined:"",dense:"","model-value":r(o.overtime),readonly:!0},null,8,["model-value"])]),t("div",$t,[t("div",qt,[o.notes.length?(u(!0),_(I,{key:0},H(o.notes,D=>(u(),R(de,{rounded:"",color:"primary",label:D.type,class:"text-uppercase cursor-pointer"},{default:s(()=>[a(X,{anchor:"top middle",self:"center middle",class:"text-uppercase"},{default:s(()=>[t("div",null,y(D.name),1)]),_:2},1024)]),_:2},1032,["label"]))),256)):F("",!0)])])]))),256))]),t("div",Vt,[(u(!0),_(I,null,H(A.value,(o,L)=>(u(),_("div",null,[t("div",kt,y(o?.status=="Pending"?"unsigned":o?.description),1),o?.status=="Pending"?(u(),_("div",St,[t("div",Dt,y(o?.original_approver_name),1),t("div",zt,y(o?.original_approver_position),1)])):F("",!0),o?.status=="Approved"?(u(),_("div",Pt,[o?.is_overide?(u(),_("div",Ct,[t("div",Tt,[t("div",Ut,y(o?.original_approver_name),1),t("div",At,y(o?.original_approver_position),1)]),l[12]||(l[12]=t("div",{class:"text-caption text-uppercase text-italic text-bold q-mb-lg"},"overiden by",-1)),t("img",{src:h(o?.override_signature),width:"150"},null,8,Lt),t("div",Ft,y(o?.override_name),1),t("div",Rt,y(o?.override_position),1),t("div",Nt,y(G(o?.signed_at)),1)])):F("",!0),o?.is_overide?F("",!0):(u(),_("div",Qt,[t("img",{src:h(o?.original_signature),width:"150"},null,8,Et),t("div",Mt,y(o?.original_approver_name),1),t("div",Bt,y(o?.original_approver_position),1),t("div",jt,y(G(o?.signed_at)),1)]))])):F("",!0),o?.status=="Pending"&&P(b).hasRole(["SuperAdmin","Management"])?(u(),_("div",Ot,[a(Ce,{modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=D=>d.value=D),val:o?.id,label:"Overide","checked-icon":"bi-check-circle-fill","unchecked-icon":"bi-check-circle",size:"sm",class:"tex-caption"},null,8,["modelValue","val"])])):F("",!0)]))),256))])]),_:1,__:[13,14]}),a(se,{class:"q-pa-lg bg"},{default:s(()=>[t("div",Yt,[P(V).data?.status!="Approved"?(u(),R(q,{key:0,unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"save"},{default:s(()=>[a(ce,{onBeforeShow:()=>{},"transition-show":"jump-up","transition-hide":"jump-down",offset:[0,15],class:"radius-sm",style:{"box-shadow":"rgba(0, 0, 0, 0.09) 0px 3px 12px"}},{default:s(()=>[a(C,{class:"no-shadow radius-sm q-pa-lg",style:{width:"300px"}},{default:s(()=>[a(S,null,{default:s(()=>l[15]||(l[15]=[t("div",{class:"text-h6 text-center text-uppercase"}," proceed to save ",-1)])),_:1,__:[15]}),a(se,null,{default:s(()=>[a(q,{unelevated:"",size:"md",color:"primary",class:"full-width text-capitalize",label:"proceed",onClick:l[1]||(l[1]=()=>{U()})})]),_:1})]),_:1})]),_:1})]),_:1})):F("",!0),i.value?(u(),R(q,{key:1,unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"approve"},{default:s(()=>[a(ce,{onBeforeShow:()=>{},"transition-show":"jump-up","transition-hide":"jump-down",offset:[0,15],class:"radius-sm",style:{"box-shadow":"rgba(0, 0, 0, 0.09) 0px 3px 12px"}},{default:s(()=>[a(C,{class:"no-shadow radius-sm q-pa-lg",style:{width:"300px"}},{default:s(()=>[a(S,null,{default:s(()=>l[16]||(l[16]=[t("div",{class:"text-h6 text-center text-uppercase"}," proceed to approve ",-1)])),_:1,__:[16]}),a(se,null,{default:s(()=>[a(q,{unelevated:"",size:"md",color:"primary",class:"full-width text-capitalize",label:"proceed",onClick:l[2]||(l[2]=o=>w(j.value))})]),_:1})]),_:1})]),_:1})]),_:1})):F("",!0),P(V).data?.status=="Pending"&&P(b).hasRole(["SuperAdmin","Management"])?(u(),R(q,{key:2,disable:!x.value,unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"overide"},{default:s(()=>[a(ce,{onBeforeShow:()=>{},"transition-show":"jump-up","transition-hide":"jump-down",offset:[0,15],class:"radius-sm",style:{"box-shadow":"rgba(0, 0, 0, 0.09) 0px 3px 12px"}},{default:s(()=>[a(C,{class:"no-shadow radius-sm q-pa-lg",style:{width:"300px"}},{default:s(()=>[a(S,null,{default:s(()=>l[17]||(l[17]=[t("div",{class:"text-h6 text-center text-uppercase"}," proceed to overide signature ",-1)])),_:1,__:[17]}),a(se,null,{default:s(()=>[a(q,{unelevated:"",size:"md",color:"primary",class:"full-width text-capitalize",label:"proceed",onClick:l[3]||(l[3]=o=>Q(P(V).data?.id))})]),_:1})]),_:1})]),_:1})]),_:1},8,["disable"])):F("",!0),a(q,{unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"print",onClick:l[4]||(l[4]=o=>k(j.value))}),a(q,{unelevated:"",size:"md",color:"primary",class:"btn text-capitalize",label:"discard",onClick:l[5]||(l[5]=()=>{z("update:modelValue",null)}),outline:""})])]),_:1}),a(ge,{showing:p.value},{default:s(()=>[a(C,{class:"no-shadow radius-md q-pa-md"},{default:s(()=>[a(S,{class:"text-center"},{default:s(()=>[t("div",null,[a(ie,{color:"dark"})]),l[18]||(l[18]=t("div",{class:"text-dark text-uppercase text-caption"},"we're working on it!",-1))]),_:1,__:[18]})]),_:1})]),_:1},8,["showing"])]),_:1})]),_:1},8,["modelValue"]),a(ue,{modelValue:O.value,"onUpdate:modelValue":l[8]||(l[8]=o=>O.value=o),"full-height":"","full-width":"",class:"pdf"},{default:s(()=>[a(C,{class:"bg-white q-pa-none",style:{height:"100vh",overflow:"hidden"}},{default:s(()=>[te(a(q,{icon:"bi-x",class:"fixed bg-white text-primary shadow-2",round:"",dense:"",style:{top:"15px",right:"15px","z-index":"999"}},null,512),[[me]]),a(S,{class:"q-pa-none",style:{height:"100%",overflow:"hidden"}},{default:s(()=>[t("div",It,[J.value?(u(),_("iframe",{key:0,src:J.value,frameborder:"0"},null,8,Ht)):F("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Kt={class:"dtr-wrapper"},Xt={class:"filter-inline"},Zt={class:"q-gutter-xs"},Gt={class:"card-grid"},Jt={key:0,class:"card-anim-wrapper"},ea={key:1,class:"card-anim-wrapper",style:{animationDelay:"120ms"}},ta={class:"text-subtitle2 text-uppercase"},aa={class:"text-caption text-capitalized"},sa={class:"text-caption"},la={class:"text-caption text-grey"},oa={class:"text-caption text-uppercase"},na={id:"glass-overlay"},ia={__name:"DTRComponent",setup(Z){const N=fe(),V=oe(),b=new Date,f=m(String(b.getMonth()+1).padStart(2,"0")),z=m(String(b.getFullYear())),T=m([]),p=m({}),c=m(1),j=m(10),M=m(!1),A=m(""),v=async()=>{M.value=!0;try{const{data:k}=await K.get("/attendance",{params:{Page:c.value,Limit:j.value,Filter:A.value||"",month:f.value,year:z.value}});T.value=k.data,p.value=k.meta}catch(k){console.error("Error fetching all data:",k),B.fire({icon:"error",html:`
                <div class="text-h6 text-bold text-uppercase">Error</div>
                <div class="text-caption text-capitalize;">Unable to fetch records</div>
            `})}finally{M.value=!1}};be(A,()=>{c.value=1,v()});const $=()=>{c.value<p.value.TotalPages&&(c.value++,v())},h=()=>{c.value>1&&(c.value--,v())},W=()=>{c.value>1&&(c.value=1,v())},G=()=>{c.value<p.value.TotalPages&&(c.value=p.value.TotalPages,v())},g=k=>{if(!k)return"";const d=k.first_name||"",x=k.middle_name?k.middle_name.charAt(0).toUpperCase()+".":"",Q=k.last_name||"",n=k.suffix?` ${k.suffix}`:"";return`${d} ${x} ${Q}${n}`.trim()},r=k=>{const d=new Date(k.date_from),x=new Date(k.date_to),Q={month:"short",day:"numeric"},n=d.getFullYear(),l=d.toLocaleDateString("en-US",Q),o=x.toLocaleDateString("en-US",Q);return d.getMonth()===x.getMonth()?`${l}–${x.getDate()}, ${n}`:`${l} – ${o}, ${n}`},i=k=>{let d=0;const x=new Date(k.date_from),Q=new Date(k.date_to);x.setHours(0,0,0,0),Q.setHours(0,0,0,0);for(let n=new Date(x);n<=Q;n.setDate(n.getDate()+1)){const l=n.getDay();l!==0&&l!==6&&d++}return`${d} ${d===1?"day":"days"}`},w=Array.from({length:12},(k,d)=>{const x=new Date(0,d).toLocaleString("en-US",{month:"short"}),Q=String(d+1).padStart(2,"0");return{label:x,value:Q}});we(()=>{v()});const U=m(null),O=k=>{U.value=k},J=m(!0);return $e(()=>{setTimeout(()=>{J.value=!1},1e3)}),(k,d)=>(u(),_("div",Kt,[a(C,{class:"no-shadow radius-xs q-mb-md"},{default:s(()=>[a(S,null,{default:s(()=>[t("div",Xt,[a(E,{outlined:"",modelValue:z.value,"onUpdate:modelValue":d[0]||(d[0]=x=>z.value=x),style:{width:"80px"},dense:""},null,8,["modelValue"]),t("div",Zt,[(u(!0),_(I,null,H(P(w),(x,Q)=>(u(),R(q,{round:"",unelevated:"",class:ne(f.value===x.value?"active":"inactive"),onClick:()=>{f.value=x.value,v()},size:"md",label:x.label},null,8,["class","onClick","label"]))),256))])])]),_:1})]),_:1}),t("div",Gt,[P(N).hasRole(["SuperAdmin","Admin","HR"])?(u(),_("div",Jt,[te((u(),R(C,{key:"data-add",class:"card card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm",onClick:d[1]||(d[1]=()=>{O("AttendanceDialog")})},{default:s(()=>[a(S,null,{default:s(()=>[a(ve,{name:"bi-plus-circle",color:"grey",size:"xl"})]),_:1})]),_:1})),[[pe]])])):F("",!0),T.value.length===0?(u(),_("div",ea,[a(C,{class:"card card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm",tag:"label"},{default:s(()=>[a(S,null,{default:s(()=>d[5]||(d[5]=[t("div",{class:"text-caption text-grey text-uppercase"},"no data found",-1)])),_:1,__:[5]})]),_:1})])):F("",!0),(u(!0),_(I,null,H(T.value,(x,Q)=>(u(),_("div",{key:`data-${x.id}`,class:"card-anim-wrapper",style:qe({animationDelay:`${Q*120}ms`})},[te((u(),R(C,{onClick:()=>{O("AttendanceInfoDialog"),P(V).data=x,P(V).month=f.value,P(V).year=z.value},class:"card card-hover-animate flex column justify-center items-center no-shadow cursor-pointer radius-sm"},{default:s(()=>[a(S,null,{default:s(()=>[t("div",ta,y(g(x?.employee)),1),t("div",aa,y(x?.status),1)]),_:2},1024),a(S,null,{default:s(()=>[t("div",sa,y(r(x)),1),t("div",la,y(i(x)),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[pe]])],4))),128))]),a(ze,{class:"bg-white no-shadow q-mx-lg q-mb-md q-py-sm radius-xs text-grey"},{default:s(()=>[a(Se,null,{default:s(()=>[a(De,{class:"text-caption text-uppercase"},{default:s(()=>d[6]||(d[6]=[t("div",null,"© 2025 WORKFORCE. All Rights Reserved.",-1)])),_:1,__:[6]}),a(E,{outlined:"",dense:"",debounce:"1000",modelValue:A.value,"onUpdate:modelValue":d[2]||(d[2]=x=>A.value=x),placeholder:"Search..."},{before:s(()=>[t("div",oa,y(`page ${p.value.CurrentPage} of ${p.value.TotalPages}`),1)]),after:s(()=>[a(q,{unelevated:"",size:"sm",round:"",color:"primary",icon:"bi-arrow-bar-left",disable:c.value<=1,onClick:W},{default:s(()=>[a(X,{anchor:"top middle",self:"top middle","transition-show":"scale","transition-hide":"scale",class:"text-capitalize"},{default:s(()=>d[7]||(d[7]=[ee("First Page")])),_:1,__:[7]})]),_:1},8,["disable"]),a(q,{unelevated:"",size:"sm",round:"",color:"primary",icon:"bi-arrow-left-short",disable:c.value<=1,onClick:h},{default:s(()=>[a(X,{anchor:"top middle",self:"top middle","transition-show":"scale","transition-hide":"scale",class:"text-capitalize"},{default:s(()=>d[8]||(d[8]=[ee("Previous")])),_:1,__:[8]})]),_:1},8,["disable"]),a(q,{unelevated:"",size:"sm",round:"",color:"primary",icon:"bi-arrow-right-short",disable:c.value>=p.value.TotalPages,onClick:$},{default:s(()=>[a(X,{anchor:"top middle",self:"top middle","transition-show":"scale","transition-hide":"scale",class:"text-capitalize"},{default:s(()=>d[9]||(d[9]=[ee("Next")])),_:1,__:[9]})]),_:1},8,["disable"]),a(q,{unelevated:"",size:"sm",round:"",color:"primary",icon:"bi-arrow-bar-right",disable:c.value>=p.value.TotalPages,onClick:G},{default:s(()=>[a(X,{anchor:"top middle",self:"top middle","transition-show":"scale","transition-hide":"scale",class:"text-capitalize"},{default:s(()=>d[10]||(d[10]=[ee("Last Page")])),_:1,__:[10]})]),_:1},8,["disable"])]),prepend:s(()=>[a(ve,{name:"bi-search",style:{"font-size":"1rem"}})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(it,{modelValue:U.value,"onUpdate:modelValue":d[3]||(d[3]=x=>U.value=x),"dialog-name":"AttendanceDialog",onSaved:v},null,8,["modelValue"]),a(Wt,{modelValue:U.value,"onUpdate:modelValue":d[4]||(d[4]=x=>U.value=x),"dialog-name":"AttendanceInfoDialog",onSaved:v},null,8,["modelValue"]),a(ke,{name:"glass-fade"},{default:s(()=>[te(t("div",na,[a(C,{class:"no-shadow radius-md q-pa-md"},{default:s(()=>[a(S,{class:"text-center"},{default:s(()=>[t("div",null,[a(ie,{color:"dark"})]),d[11]||(d[11]=t("div",{class:"text-dark text-uppercase text-caption"},"we're working on it!",-1))]),_:1,__:[11]})]),_:1})],512),[[Ve,J.value]])]),_:1})]))}},ra={class:"q-gutter-xs"},da={class:"q-mt-md"},ua={__name:"DailyTimeRecordPage",setup(Z){const N=oe(),V={LogsComponent:st,DTRComponent:ia},b=[{component:"LogsComponent",label:"daily logs"},{component:"DTRComponent",label:"dtr"}];return(f,z)=>(u(),_("div",null,[a(C,{class:"no-shadow radius-xs"},{default:s(()=>[a(S,null,{default:s(()=>[t("div",ra,[(u(),_(I,null,H(b,(T,p)=>a(q,{unelevated:"",class:ne(P(N).component===`${T.component}`?"bg-primary text-white":"bg-accent"),onClick:c=>P(N).component=`${T.component}`,size:"xs",label:T.label},null,8,["class","onClick","label"])),64))])]),_:1})]),_:1}),t("div",da,[(u(),R(Te(V[P(N).component]),{key:P(N).component}))])]))}},wa=Ae(ua,[["__scopeId","data-v-4eeacbe4"]]);export{wa as default};
